(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[89648],{

/***/ 782783:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(94158);__web_req__(640067);self._5880d4398c473aa67256e87589eaef11 = self._5880d4398c473aa67256e87589eaef11 || {};(function(__c) {var Lq;var Fq;var up;var sp;var tp;var jq;var No;var Qo;var Cq;var Io;var Xo;var lp;var Go;var Eo;var Vo;var Xn=__c.Xn;var ap;var $o;var wq;var vq;var Yo;var tq;var Wo;var rq;var ea=__c.ea;var Oo;var Co;var Zp;var dq;var cq;var eq;var aq;var bq;var fq;var Fo;var Jo;var Vp;var $p;var O=__c.O;var Yp;var po;var oo;var no;var Up;var Np;var Ng=__c.Ng;var Fp;var Ep;var Dp;var Cp;var Bp;var zp;var oa=__c.oa;var fp;var ep;var bp;var Ro;var Bo;var Ao;var Lo;var Mo;var Ko;var Do;var ma=__c.ma;var m=__c.m;
var r=__c.r;var mo;var ka=__c.ka;
var oib,ho,pib,qib,rib,qo,uib,wib,ro,so,zib,xib,yib,Bib,to,Fib,Gib,Hib,Iib,Jib,Kib,Lib,Mib,uo,vo,wo,Nib,Oib,xo,Rib,zo,Vib,Xib,Yib,Wib,$ib,ajb,bjb,cjb,djb,ejb,pjb,ujb,yjb,zjb,Ajb,Fjb,Gjb,Hjb,Ijb,Jjb,Mjb,Njb,Pjb,Qjb,Sjb,Ujb,Vjb,cp,Xjb,Zjb,$jb,ckb,dkb,ip,ekb,fkb,gkb,kp,ikb,jkb,kkb,mkb,nkb,okb,pkb,rkb,skb,vp,Dkb,wp,xp,Fkb,Gkb,yp,Jkb,Lkb,Kkb,Mkb,Nkb,Pkb,Rkb,Ikb,Tkb,Skb,Ukb,Wkb,Xkb,Gp,Ykb,alb,Zkb,$kb,Ip,dlb,flb,clb,elb,glb,hlb,blb,ilb,jlb,Kp,llb,mlb,nlb,Lp,olb,plb,qlb,rlb,vlb,Qp,Pp,wlb,Rp,xlb,ylb,zlb,Alb,
Blb,Clb,Dlb,Flb,Sp,Glb,Ilb,Tp,Jlb;oib=function(a,b){ka(b.length>0);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;b>1;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};ho=function(a,b,c){ka(a.bi(b,c),"{} != {}",b,c)};pib=function(a,b){return new mo(b(a.Lt),b(a.pu),a.Uta,a.fAa)};
no=__c.no=function(a,b){return new mo(a,b,!1,!1)};oo=__c.oo=function(a){return new mo(void 0,a,!0,!1)};po=__c.po=function(a,b){a.Uta||(a.Uta=b.Uta);a.fAa||(a.fAa=b.fAa);return b};qib=function(a,b=!0){a.Uta||(a.Uta=b)};rib=function(a,b=!0){a.fAa||(a.fAa=b)};qo=function(a){return a===1?sib:{type:0,length:a}};uib=function(a){return a===1?tib:{type:1,length:a}};wib=function(a){return a===1?vib:{type:2,length:a}};ro=function(a,b){return{type:3,state:a,shift:b}};so=function(a,b){return{type:4,delta:a,shift:b}};
zib=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${xib(a.state)})${yib(a.shift)}`;case 4:return`U(${xib(a.delta)})${yib(a.shift)}`;default:throw new r(a);}};xib=function(a){return a!=null?a:"\u22a5"};yib=function(a){return a!=null?`[${a.Eh},${a.lm}]`:""};
Bib=function(a,b){return b&&a.YLa?new Aib(a.ops.map(c=>c.type===3&&c.shift?ro(c.state,{Eh:c.shift.Eh+b,lm:c.shift.lm+b}):c.type===4&&c.shift?so(c.delta,{Eh:c.shift.Eh+b,lm:c.shift.lm+b}):c),a.pre,a.post,a.YLa):a};to=function(a,b){const c=m(a.um);if(c.type===0)return a.WC(0,1),Cib;if(c.type===1)return a.WC(1,1),Dib;if(c.type===2)return a.WC(2,1),Eib;if(c.type!==b)throw Error();a.um=a.ops[a.i++];return c};Fib=function(a){return a.every(()=>!1)};
Gib=function(a,b){ka(b.length>0);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};Hib=function(a){ka(a.rwa<a.input.length,"{} >= {}",a.rwa,a.input.length);return a.input[a.rwa++]};Iib=function(a,b){b=a.rwa+b;ka(b<=a.input.length);const c=a.input.slice(a.rwa,b);a.rwa=b;return c};Jib=function(a,b){a.ggb||(a.ggb=new Set);ka(!a.ggb.has(b),"duplicate modification: {}",b);a.ggb.add(b)};Kib=function(a,b,c){Jib(a,b);(a.Ztc||(a.Ztc=new Map)).set(b,c)};
Lib=function(a,b,c){Jib(a,b);(a.Ytc||(a.Ytc=new Map)).set(b,c)};Mib=function(a,b){let {Eh:c,lm:d}=b;var e=a.Ztc;a=a.Ytc;if(e){const f=e.get(c);f!=null&&(c=f,e.delete(c))}a&&(e=a.get(d),e!=null&&(d=e,a.delete(d)));return c!==b.Eh||d!==b.lm?{Eh:c,lm:d}:b};uo=function(a,b,c){Jib(a,b);c!=null&&(a.i3a||(a.i3a=new Map)).set(b,c)};vo=function(a,b,c){(a.sNa||(a.sNa=new Map)).set(b,c)};wo=function(a,b,c){(a.LMa||(a.LMa=new Map)).set(c,b)};Nib=function({Eh:a,lm:b}){return{Eh:b,lm:a}};
Oib=function(a,b){return a?!!b&&a.Eh===b.Eh&&a.lm===b.lm:!b};__c.Pib=function(a){return a.filter(()=>!0)};xo=function(a,b){ka(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};Rib=function(a,b){return a===yo?b:b===yo?a:new Qib(a,b)};zo=function(a,b){return b===yo?yo:new a(b)};Vib=function(a){a:{a={items:zo(Sib,a),Tj:yo};for(b in a)if(a[b]!==yo){var b=new Tib(a);break a}b=yo}return Rib(Uib,b)};
Xib=function(a,b){ma(a.KK!=null,"mutable not connected");try{a.DZ(b),a.domain.isIdentity(b)||a.SYb&&a.SYb.reportChanged()}catch(c){throw a.error(c),c;}Wib(a,b)};Yib=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};Wib=function(a,b){ma(a.KK!=null);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
Ao=__c.Ao=function(a,b){a.ybc||(a.ybc={next:c=>{a.KK&&(a.SYb&&a.SYb.reportChanged(),Wib(a,c),a.KK.next(c))},error:c=>{a.error(c)}});return new Zib(a.ybc,b)};Bo=__c.Bo=function(a,b,c){b=a.Lz(b);a=a.connect(b,c);return{mutable:b,Zw:a}};Co=__c.Co=function(a,b,c,d){a.destroy(d,b);c.complete()};$ib=function(a,b){let c=a.rows[b];c==null&&(c=a.rows[b]=a.Wed++);return c};ajb=function(a,b){let c=a.cols[b];c==null&&(c=a.cols[b]=a.Ued++);return c};
bjb=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};cjb=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};djb=function(a,b){ka(a.IO(b),"invalid value: {}",b);return b};
ejb=function(a,b,c){if(!a.Fw(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};Do=__c.Do=function(a){return new fjb(a)};Eo=__c.Eo=function(...a){return a.length===1?new gjb(a[0]):new hjb(new Set(a))};Fo=__c.Fo=function(a,b){return new ijb(a,b,zo(Sib,a.serializer))};__c.ljb=function(a,b){return new jjb(a,b,zo(kjb,b.serializer))};Go=__c.Go=function(a,b){return new mjb(a,b)};__c.Ho=function(a,b){return new njb(a,b)};Io=__c.Io=function(a){return new ojb(a)};
pjb=function(a,b){ka(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return Do(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Jo=__c.Jo=function(a,b){ka(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return Do(c=>Number.isFinite(c)&&a<=c&&c<=b)};Lo=__c.Lo=function(a){return a instanceof Ko?new qjb(a,zo(rjb,a.serializer)):new sjb(a,zo(rjb,a.f6b),zo(rjb,a.tra))};ujb=function(a){return new tjb(a)};Mo=__c.Mo=function(a){return new vjb(a,a.serializer)};No=__c.No=function(a){return new wjb(a,a.tra)};
Oo=__c.Oo=function(a){return Mo(Lo(a))};yjb=function(a,b,c){return c==null||a.component.isIdentity(c)?xjb:new Map([[b,c]])};zjb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Ajb=function(a,b,c){const d=Ao(a,g=>a.domain.update(b,g)),{mutable:e,Zw:f}=Bo(a.type,c,d);return{nUc:{to:f,from:d},value:e}};__c.Po=function(...a){[,a]=a.length===1?[void 0,a[0]]:a;return new Bjb(a,zo(kjb,a.tra))};Qo=__c.Qo=function(a){return new Cjb(a,a.serializer)};
__c.So=function({get:a,set:b,equals:c}){return new Djb(Ro(a,{set:b,equals:c}))};Fjb=function(a,b,c){return Ejb.of({...a,...b,...c})};Gjb=function(...a){const b=new Set;for(const c of a)for(const d in c)ka(!b.has(d),'duplicate key: "{}"',d),b.add(d)};Hjb=function(a,b){return Ao(a,c=>({[b]:c}))};Ijb=function(a,b){return Ao(a,c=>({[b]:c}))};
Jjb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Ob:{...a.Ob,...b.Ob},attributes:{...a.attributes,...b.attributes},create:e=>{const {Ob:f,attributes:g}=c(e),{Ob:h,attributes:k}=d({...e,...f,...g});return{Ob:{...f,...h},attributes:{...g,...k}}}}};Vo=__c.Vo=function(a){return Kjb.gi(a)};Wo=__c.Wo=function(a){return a.domain.Kg()};Xo=__c.Xo=function(a){return new __c.Ljb(a,Vib(a.tra))};Yo=__c.Yo=function(){throw Error("list not modifiable");};
__c.Zo=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};Mjb=function(a,b){a=a.length;ka(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};Njb=function(a,b){a=a.length;ka(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.Ojb=function(a,b){return a?b?{eb:__c.Zo(a.eb,b.eb),item:__c.Zo(a.item,b.item),Tj:__c.Zo(a.Tj,b.Tj)}:a:b};Pjb=function(a,b){a=a.Qaa;ka(0<b&&b<a,"{} \u2209 (0, {})",0,a)};Qjb=function(a,b){a=a.s1;ka(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
$o=__c.$o=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.mX(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.d3a(c.state);case 2:return a.Iqa(b.state);default:throw new r(c);}default:throw new r(b);}};ap=__c.ap=function(a){const b=m(a.um);a.um=a.ops[a.i++];return b};__c.Rjb=function(a,b){const c=m(a.um),d=c.Qaa;ka(0<b&&b<=d);if(b<d){const [e,f]=c.JPb(b);a.um=f;return e}a.um=a.ops[a.i++];return c};
Sjb=function(a,b){const c=m(a.um),d=c.s1;ka(0<b&&b<=d);if(b<d){const [e,f]=c.IPb(b);a.um=f;return e}a.um=a.ops[a.i++];return c};Ujb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ka(b.type===1),new bp(a.component.apply(b.state,c.delta));case 3:return __c.Tjb(a,b,c.oldState),c.newState;default:throw new r(c);}};
Vjb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ka(b.type===1),new bp(a.component.Dl(b.state,c.delta));case 3:return __c.Tjb(a,b,c.newState),c.oldState;default:throw new r(c);}};cp=function(a,b,c){switch(b.type){case 0:return c.type===0&&b.state===c.state;case 1:return c.type===1&&a.component.bi(b.state,c.state);case 2:return c.type===2&&b.state===c.state;default:throw new r(b);}};__c.Tjb=function(a,b,c){ka(cp(a,b,c),"{} != {}",b,c)};
__c.Wjb=function(a,b){const c=__c.dp.Kg(),d=a.cursor(0,{...ep,Tj:g=>c.retain(g)}),e={...ep,eb:g=>c.retain(g.length)},f={...ep,eb:g=>c.mX(g)};b.forEach({retain:g=>d.Fn(g,e),delete:g=>d.Fn(g,f),insert:g=>c.insert(g)});return c.build()};
Xjb=function(a,b){const c=new fp,d=a.cursor();a=h=>{throw Error(String(h));};const e={...ep,eb:h=>c.retain(h.length)},f={...ep,eb:a},g={...ep,eb:()=>0,Tj:a};b.forEach({retain:h=>d.zR(h,e),update:h=>{throw new r(h);},insert:h=>h.type!==2&&c.insert(h.state),change:(h,k)=>{h.type===2?(d.zR(h.length,f),k.type!==2&&c.insert(k.state)):(d.zR(h.length,g),k.type===2?c.delete(h.length):(ka(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.gp=function(a){return Object.keys(a)};
__c.hp=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.Yjb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};Zjb=function(a,b){return{type:0,FF:a,lH:b}};$jb=function(a){return{type:1,length:a}};__c.akb=function(a,b){return a&&b?a.so===b.so&&a.sn===b.sn:!a&&!b};__c.bkb=function(a,b){Object.entries(a).forEach(([c,d])=>d!=null&&b(d,c))};
ckb=function(a,b){const c=__c.gp(a),d=__c.gp(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.Yjb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.akb(a[f].r,b[f].r))};dkb=function(a,b={}){return{type:0,length:a,changes:b}};ip=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
ekb=function(a,b){let c=0,d=0;for(const e of a.mea)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};fkb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new jp(d,e):a};gkb=function(a,b,c){for(const [d,e]of a){const f=fkb(e,b,c);f!==e&&a.set(d,f)}};
kp=function(a,b,c,d){for(const [e,f]of a){const g=f.Raa,h=f.Maa,k=g&&(b!=null?fkb(g,b,d):g),l=h&&(c!=null?fkb(h,c,d):h);k===g&&l===h||a.set(e,new hkb(k,l))}};ikb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};jkb=function(a,b){oa(a,b);return a};kkb=function(a,b){return{key:a.dTa(b),value:b}};lp=__c.lp=function(a,b,c){return new lkb(a,b,c)};mkb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
nkb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};okb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};pkb=function(a){return new RegExp(a+"B[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}")};__c.qkb=function(a){oa(a.normalize(a.defaultValue),a.defaultValue)};__c.mp=function(a,b){return b!=null?a.decode(b):void 0};
__c.np=function(a,b){return b!=null?a.encode(b):void 0};rkb=function(a){a=a.split("/");return a.length===2?a[0]:void 0};skb=function(a){if(a.startsWith(`${__c.op}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.tkb=function(a,b){if(b=skb(b)){const [c,d]=b;if(a.y9c(c))return[c,d]}};__c.pp=function(a,b,c,d){c=a.roa(c);for(const e of Object.keys(b))a.oD(e)&&c(e)&&d(b[e],e)};__c.qp=function(a,b,c){const d={};a.copy(b,c,d);return d};
__c.ukb=function(a,b,c){return a.attributes[c].x9c?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};__c.vkb=function(a,b,c){const d={};__c.pp(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.rp=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{ka(a.oD(d)),c[d]=e!=null?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.xkb=function(a){return new wkb("block",a)};sp=__c.sp=function(a,b){return new ykb(a,b)};tp=__c.tp=function(a,b,c){return new zkb(a,b,c)};
up=__c.up=function(a,b){return new Akb(a,b,b[0])};__c.Ckb=function(a){const b=(d,e)=>{if(typeof e==="string")return d[e]?d[e]:(d=rkb(e))&&a.oTa[d]?a.oTa[d]:(e=skb(e))&&a.vv[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>b(d,e)!=null,ownKeys:d=>Object.keys(d)});return new __c.Bkb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.oTa)),new Set(Object.keys(a.vv)))};vp=function(a){return{type:0,length:a}};Dkb=function(a){return{type:1,length:a}};wp=function(a,b){return a.WC(1,b).length};
xp=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Ekb;ka(c[0]>=0);b=new Map;a=a.pd(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){ma(c!=null);switch(c.type){case 0:c=a.Iz(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=wp(a,c.length);break;default:throw new r(c);}c=a.head}c&&c.type===1&&(e+=wp(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
Fkb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Ekb;ka(c[0]>=0);b=new Map;a=a.pd(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){ma(c!=null);switch(c.type){case 0:c=a.Iz(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=wp(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};Gkb=function(a){return JSON.stringify(a,(b,c)=>c!=null?c:null)};yp=function(a){return new Hkb(a.Zvd)};
Jkb=function(a,b,c,d){var e=Math.max(a.rq,b.rq),f=Math.max(a.wA,b.wA);a=a.pd(void 0,e,f);b=b.pd(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&e.type===0||f&&f.type===0){const n=a.kx(),p=b.kx(),q=c.kx();e=n;f=p;for(var g=q,h=d,k=e.head,l=f.head;k||l;){if(k&&k.type===0||l&&l.type===0){k=e.Mv();l=f.Mv();for(const u of Ikb(k,l))g.Zm(u,h(u,e.attrs[u],f.attrs[u]))}else if(k&&l)k=Math.min(k.length,l.length),e.Wn(k),f.Wn(k),g.LB(k);else throw Error(`length mismatch: ${k} x ${l}`);k=e.head;l=f.head}n.finish();
p.finish();q.finish()}else if(e&&f)e=Math.min(e.length,f.length),zp(a,e),zp(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};Lkb=function(a,b,c,d){return Ap.isIdentity(c)&&Ap.isIdentity(d)||b.items.isEmpty()?b:Kkb("apply",a.Zvd,b,c,d)};
Kkb=function(a,b,c,d,e){const f=new Bp,[g,h]=a==="apply"?[c.items.pd(e.pre),e.pd(c.items.length,0)]:[c.items.pd(e.post),e.pd(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&k.type===1)wp(h,k.length),a==="apply"?f.Gc(k.length):g.Wn(k.length);else if(e&&e.type===0){e=g.Mv();const [n,p]=a==="apply"?[e.pd(d.pre),d.pd(e.length,0)]:[e.pd(d.post),d.pd(0,e.length)];e=a;k=new Bp;var l=n.head;let q=p.head;for(;l||q;){if(q&&q.type===1)wp(p,q.length),e==="apply"?k.Gc(q.length):n.Wn(q.length);else if(l)l.type===
0?k.grad(n.Mv()):q?(l=Math.min(l.length,q.length),n.Wn(l),p.Iz(l),k.Gc(l)):(n.Wn(l.length),k.Gc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.Wn(e),h.Iz(e),f.Gc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return Cp.of(b,a,c,a.length)};Mkb=function(a){return{type:1,length:a}};
zp=__c.zp=function(a,b){ma(a.gW==null);return a.nTa.Wn(b)};Nkb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.ac,d.ac)&&a(b,c.r,d.r):!1};__c.Okb=function(a,b,c,d){if(!d)return c;ka(a(b,c,d.ac),"{} != {}",c,d.ac);return d.r};Pkb=function(a,b,c,d){return Nkb(a,b,c,d)?void 0:{t:c,b:d}};
__c.Qkb=function(a,b,c){const d={};if(b&&c)for(const f of Ikb(b,c)){var e=Pkb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of Dp(b))(c=Pkb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of Dp(c))(b=Pkb(a,f,void 0,c[f]))&&(d[f]=b);return Ep(d)?void 0:d};Rkb=function(a,b,c){return Ikb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?Nkb(a,d,e.t,f.t)&&Nkb(a,d,e.b,f.b):!1})};Dp=__c.Dp=function(a){return Object.keys(a)};
Ikb=function(a,b){return a&&b?[...(new Set([...Dp(a),...Dp(b)]))]:a?Dp(a):b?Dp(b):[]};Ep=__c.Ep=function(a){return Dp(a).length===0};Tkb=function(a,b){b.forEach(a.hh.oD,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};Skb(e,(h,k)=>{h!=null&&(ma(a.hh.xBa(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};Skb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};Ukb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};
Fp=__c.Fp=function(a,b,c,d){ma(0<=a);ma(0<=b);ma(a<=c);ma(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.Vkb=function(a,b){return{span:a,state:b}};Wkb=function(a){const b=a.rows[a.y];if(b!=null)for(;b.cells[a.x]==null&&a.x<b.cells.length;)a.x++};Xkb=function(a){for(;a.rows[a.y]==null&&a.y<a.rows.length;)a.y++};Gp=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
Ykb=function(a,b,c,d){if(Ap.isIdentity(c)&&Ap.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=xp(c,e),h=xp(d,f),k=new Hp;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
alb=function(a,b,c){const d=new Hp;Zkb(b.pd(),c.pd(),(e,f,g,h)=>{b==null&&c==null||d.add(e,f,$kb(a,g,h))});return d.build()};Zkb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=d==null?1:e==null?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(d<0){const {x:f,y:g,value:h}=a.Nt();c(f,g,h,void 0)}else if(d>0){const {x:f,y:g,value:h}=b.Nt();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.Nt();({value:d}=b.Nt());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
$kb=function(a,b,c){if(b==null)return c;if(c==null)return b;switch(b.type){case 0:a:switch(c.type){case 1:ma(b.n!=null);c.bounds&&ma(Gp(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:ma(Ip(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&ma(Gp(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:ma(c.o!=null);b.bounds&&ma(Gp(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Dl(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};Ip=function(a,b,c){return b===c?!0:b&&c?Gp(b,c)&&a.component.bi(b.state,c.state):!1};
dlb=function(a,b,c,d,e,f){const g=d.type===0?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.yi);n<=h;n++)blb(f,n*2),f.kx(),f.W3b((p,q)=>{e.append(Fp(p,q,p,q))}),f.Sab();f.yi<=h&&blb(f,(h+1)*2);if(g==null)return{$7a:b}=clb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {$7a:k,FMb:l}=clb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);ma(d.type===0);return a.replace(d.n,void 0)}};
flb=function(a,b){elb(a,b.left,b.top);a.append(b)};clb=function(a,b){elb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{$7a:!0,FMb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{$7a:!0,FMb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{$7a:!0,FMb:{right:c,bottom:d}};d=e}return{$7a:!1,FMb:void 0}};
elb=function(a,b,c){c>a.kda&&(a.buffer.splice(0,c-a.kda),a.kda=c,a.zsa=0);b>a.zsa&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.zsa),a.zsa=b)};glb=function(a,b,c){c-=a.kda;a=c===0?b-a.zsa:b;ma(c>=0&&a>=0);return{xAd:a,BAd:c}};hlb=function(a){const b=Ap.Kg();a=a.pd();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(c.length*2);a.Iz(c.length);break;case 1:b.expand(c.length*2);wp(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
blb=function(a,b){for(ma(b>=a.kka);b>a.kka;){var c=a.pd.head;ma(c!=null);c.type===0?(a.kx(),a.Sab()):(c=Math.min(c.length,b-a.kka),zp(a.pd,c),a.kka+=c)}};ilb=function(a,b){const c=new Hp,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);g==null||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.cc(g.value)},void 0)))}return a.domain.Be({cells:c.build()})};
jlb=function(a,b){return c=>{const {left:d,top:e}=b.hid.get();return a.domain.Be({cells:(new Hp).add(d,e,a.domain.update(void 0,c)).build()})}};Kp=function(a,b,c,d){a.jk.set(b,new Jp(c,d));return a};llb=function(a,b,c,d){a.jk.set(b,new klb(c,d));return a};mlb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
nlb=function(a,b){if(Ap.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:e.oldValue!=null&&c.add(e.oldValue);e.newValue!=null&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=xp(b,c);return Ng(a,e=>{switch(e.type){case 0:return new Jp(e.oldValue!=null?m(d.get(e.oldValue)):void 0,e.newValue!=null?m(d.get(e.newValue)):void 0);case 1:return new klb(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};Lp=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};olb=function(a){ma(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};plb=function(a){const b=new Map;for(const [c,d]of a)a=Lp(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};qlb=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=olb(c),e=Lp(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,Mp.from({start:f,end:g}))}if(a.size)throw Error();return b};
rlb=function(a){const b=Np.Kg();for(const [d,e]of a.Se)switch(e.type){case "replace":var c=Lp(d);Kp(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);Kp(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=Lp(d);e.start&&llb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&llb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return Np.Be(a.axis,b.build().jk)};
vlb=function(a){const b=new Map,c=new Map(a.jk);for(const [f,g]of c){const h=olb(f),k=Lp(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));ma(d.type===g.type);ma(e.type===g.type);ma(d.oldValue!=null===(e.oldValue!=null));ma(d.newValue!=null===(e.newValue!=null));c.delete(k.start);c.delete(k.end);b.set(h,new slb(d.oldValue!=null&&e.oldValue!=null?Mp.from([d.oldValue,e.oldValue]):void 0,d.newValue!=null&&e.newValue!=null?Mp.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&ma(d.type===g.type);e&&ma(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new tlb(d?Op.from(d):void 0,e?Op.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return ulb.create(a.axis,b)};Qp=function(a,b,c){const {x:d,y:e,...f}=a;ka(Ap.ek(d,Pp(b)));ka(Ap.ek(e,Pp(c)));return f};
Pp=function(a){const b=Ap.Kg();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};wlb=function(a,b){let c=a.items[b];c==null&&(c=a.items[b]={});return c};Rp=function(a,b){if(b!=null)return m(a.Q9c.get(b))};xlb=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.tWa(d));d++);return c};
ylb=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.sWa(d));d++);return c};zlb=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.tWa(d));d--);return c};Alb=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.sWa(d));d--);return c};Blb=function(a,b){const c=a.m4(b.Ag),d=a.b7(b.Hg),e=a.m4(b.fk||b.Ag);a=a.b7(b.Tk||b.Hg);ka(c!=null&&d!=null&&e!=null&&a!=null);ka(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};Clb=function(...a){return b=>{for(const c of a){const d=c(b);if(d)return d}}};
Dlb=function(a){return b=>{const c=[];if(b==="")return{s:b,value:c};for(;;){const d=a(b);if(!d||d.s===b)return{s:b,value:c};c.push(...d.value);b=d.s}}};
Flb=function(a){const b=a.WP,c=__c.So({get:()=>b.cols.reduce((n,p)=>n+p.width,0),set:n=>{ma(n>0);n/=c.value;for(const p of b.cols)p.width*=n}}),d=__c.So({get:()=>b.rows.reduce((n,p)=>n+p.height,0),set:n=>{ma(n>0);n/=d.value;for(const p of b.rows)p.height*=n,p.minHeight=p.height}}),e=Ro(()=>{const n=new Map;for(const p of b.cols)n.set(p.id,p);return n}),f=Ro(()=>{const n=new Map;for(const p of b.rows)n.set(p.id,p);return n}),g=Elb(n=>b.rows.has(n)?(n=b.rows.zl(n))?g(n)+1:0:-1),h=Elb(n=>b.cols.has(n)?
(n=b.cols.zl(n))?h(n)+1:0:-1),k=Elb(n=>(n=b.cols.zl(n))?k(n)+n.width:0),l=Elb(n=>(n=a.WP.rows.zl(n))?l(n)+n.height:0);return{attributes:{width:c,height:d},Ob:{layout:b,rows:b.rows,cols:b.cols,Ckb:n=>f.get().get(n),W7a:n=>e.get().get(n),C0a:n=>b.rows.Nbc(n),NRa:n=>b.cols.Nbc(n),l2:g,y_:h,Fc:k,Hc:l}}};Sp=__webpack_require__(519427);Glb=Sp._isComputingDerivation;__c.Hlb=Sp.comparer;Ro=__c.Ro=Sp.computed;Ilb=Sp.createAtom;Tp=Sp.observable;Jlb=Sp.ObservableMap;var Klb,Elb;Klb=__webpack_require__(635872);__c.Llb=Klb.Om;Elb=Klb.kq;__c.Mlb=__webpack_require__(497827).h;__c.Nlb=__webpack_require__(119930).xQ;__c.Olb=__webpack_require__(318386).U;__c.Plb=__webpack_require__(481922).C;var Slb,Tlb,Vlb,Xlb;__c.Qlb=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;__c.Rlb=/^#[0-9a-f]{6}$/;Slb=/^#[0-9a-f]{6}$|^transparent$/;Tlb=/^#[0-9a-f]{6}$|^inherit$/;__c.Ulb=/^[0-9]+(\.[0-9]+)?$/;Vlb=/^[0-9]+(\.[0-9]+)?px$|^inherit$/;__c.Wlb=/^-?[0-9]+(\.[0-9]+)?%$/;Xlb=/^(([1-9]|10)( ([1-9]|10)){0,9})?$|^inherit$/;var Ylb,Zlb;Up=__c.Up=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new Ylb(this,a,b,c,d)}};
Ylb=class extends Up{isIdentity(a){return this.component.isIdentity(this.g3(a))}compose(a,b){return this.HJa(this.component.compose(this.g3(a),this.g3(b)))}transform(a,b){a=this.component.transform(this.g3(a),this.g3(b));return pib(a,c=>this.HJa(c))}fl(a){return this.HJa(this.component.fl(this.g3(a)))}ek(a,b){return a===b||this.component.ek(this.g3(a),this.g3(b))}identity(a){return this.HJa(this.component.identity(this.rja(a)))}apply(a,b){const c=this.rja(a);b=this.component.apply(c,this.g3(b));return c===
b?a:this.vfb(b)}Dl(a,b){const c=this.rja(a);b=this.component.Dl(c,this.g3(b));return c===b?a:this.vfb(b)}bi(a,b){return a===b||this.component.bi(this.rja(a),this.rja(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.HJa=b;this.g3=c;this.vfb=d;this.rja=e}};mo=__c.mo=class{static Ar(){return new Zlb}constructor(a,b,c,d){this.Lt=a;this.pu=b;this.Uta=c;this.fAa=d}};Zlb=class{build(a,b){return new mo(a,b,this.Uta,this.fAa)}constructor(){this.fAa=this.Uta=!1}};var $lb=class extends Up{isIdentity(){return!0}compose(){}transform(){return no()}fl(){}ek(){return!0}identity(){}apply(a){return a}Dl(a){return a}bi(a,b){return this.Fw(a,b)}equals(a){return this===a}constructor(a){super();this.Fw=a}};var tjb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},amb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},bmb=class extends Up{update(a){return this.component.isIdentity(a)?void 0:new tjb(a)}replace(a,b){return new amb(a,b)}isIdentity(a){return a==null||a.type===0&&this.component.isIdentity(a.delta)}compose(a,b){if(a==null)return b;if(b==null)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Dl(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return ho(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(a==null||b==null)return no(b,a);switch(a.type){case 0:switch(b.type){case 0:return pib(this.component.transform(a.delta,b.delta),c=>
this.update(c));case 1:return a=this.component.apply(b.oldState,a.delta),new mo(this.replace(a,b.newState),void 0,!1,!0);default:throw new r(b);}case 1:switch(b.type){case 0:return b=this.component.apply(a.oldState,b.delta),oo(this.replace(b,a.newState));case 1:return ho(this.component,a.oldState,b.oldState),oo(this.replace(b.newState,a.newState));default:throw new r(b);}default:throw new r(a);}}fl(a){if(a==null)return a;switch(a.type){case 0:return this.update(this.component.fl(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}ek(a,b){return a===b?!0:a==null||b==null?a===b:a.type===0&&b.type===0?this.component.ek(a.delta,b.delta):a.type===1&&b.type===1?this.component.bi(a.oldState,b.oldState)&&this.component.bi(a.newState,b.newState):!1}identity(){}apply(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return ho(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Dl(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.Dl(a,
b.delta);case 1:return ho(this.component,a,b.newState),b.oldState;default:throw new r(b);}}bi(a,b){return this.component.bi(a,b)}equals(a){return this===a||a instanceof bmb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var cmb=class extends Up{isIdentity(a){return a==null||this.component.isIdentity(a)}compose(a,b){ka(a==null===(b==null));return a!=null&&b!=null?this.component.compose(a,b):void 0}transform(a,b){ka(a==null===(b==null));return a!=null&&b!=null?this.component.transform(a,b):no(b,a)}fl(a){return a!=null?this.component.fl(a):void 0}ek(a,b){return a!=null&&b!=null&&this.component.ek(a,b)||a==null&&b==null}identity(a){return a!=null?this.component.identity(a):void 0}apply(a,b){ka(a==null===(b==null));return a!=
null&&b!=null?this.component.apply(a,b):void 0}Dl(a,b){ka(a==null===(b==null));return a!=null&&b!=null?this.component.Dl(a,b):void 0}bi(a,b){return a===b||a!=null&&b!=null&&this.component.bi(a,b)}equals(a){return this===a||a instanceof cmb&&this.component.equals(a.component)}constructor(a){super();this.component=a;ka(!(a instanceof cmb))}};var sib={type:0,length:1},tib={type:1,length:1},vib={type:2,length:1},Dib=ro(),Cib=so(),Eib=so(new amb),Aib=class{toString(){return this.ops.map(zib).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.YLa=d}},dmb=new Aib([],0,0,0),emb=class{I7(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(qo(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(uib(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(wib(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ka(b>=0,"{} < 0",b);b&&(this.I7(a),this.acc+=b);return this}nMb({Eh:a,lm:b}){const c=this.ops.length,d=this.S6||(this.S6=new Map),e=this.wza||(this.wza=new Map);ka(!d.has(a),"duplicate record: {}",a);ka(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.Iqa(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.Eh===c.lm&&(c=void 0,a=ro(b)),b==null&&c==null))return this.expand();this.I7(a.type);c&&this.nMb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.Eh===c.lm&&(c=void 0,a=so(b)),b==null){if(c==null)return this.retain()}else if(b.type===1&&b.oldState==null&&b.newState==null&&c==null)return this.Iqa();this.I7(a.type);c&&this.nMb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return a==
null||typeof a==="number"?this.accumulate(0,a):this.append(so(void 0,a))}expand(a){return a==null||typeof a==="number"?this.accumulate(1,a):this.append(ro(void 0,a))}Iqa(a){return a==null||typeof a==="number"?this.accumulate(2,a):this.append(so(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(ro(a,b))}update(a,b){return this.append(so(a!=null?this.component.update(a):void 0,b))}d3a(a){return this.append(so(this.component.replace(void 0,a)))}mX(a){return this.append(so(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(so(this.component.replace(a,b),c))}build(a){this.mode!==0&&this.I7();if(a&&a.cHc())return a.yac(this.ops);if(!this.S6&&!this.wza)return new Aib(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.S6);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.Eh),f=g.get(d.lm);if(e!==d.Eh||f!==d.lm)a[h]=ro(c.state,{Eh:e,lm:f});break;case 4:d=
c.shift;e=g.get(d.Eh);f=g.get(d.lm);if(e!==d.Eh||f!==d.lm)a[h]=so(c.delta,{Eh:e,lm:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${zib(c)}`);default:throw new r(c);}}return new Aib(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.wza=this.S6=this.mode=void 0}},fmb=class{static create(a,b,c){ka(b>=0,"{} < 0",b);ka(c>=0,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,qo(b)]:a.ops;return new fmb(a)}get head(){return this.um}WC(a,
b=1){const c=m(this.um);if(c.type!==a)throw Error();const d=c.length;ka(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.um=qo(d-b),qo(b);case 1:return this.um=uib(d-b),uib(b);case 2:return this.um=wib(d-b),wib(b);default:throw new r(a);}else return this.um=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.um=a[this.i++]}},gmb=class{nMb(a,{Eh:b,lm:c}){const d=this.S6||(this.S6=new Map),e=this.wza||(this.wza=new Map);ma(!d.has(b),"already recorded: {}",b);ma(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.nMb(a,b):a!=null&&(this.list[this.length]=a);this.length++;return this}expand(a=1){ka(a>=0,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.S6||this.wza){const c=m(this.S6);var b=m(this.wza);oa(c.size,b.size);for(const [d,e]of b)ma(c.has(d),"recall has no record: {}",d),b=c.get(d),b!=null&&(a[e]=b)}this.G0c!=null&&oa(this.length,this.G0c);return a}constructor(a){this.G0c=a;this.list=[];this.length=
0;this.wza=this.S6=void 0}},hmb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new hmb(a)}finish(){oa(this.rwa,this.input.length)}constructor(a){this.input=a;this.rwa=0}},imb=class{cHc(){return!!this.ggb}yac(a){const b=new emb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.P1c(c));break;case 4:b.append(this.Q1c(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.Ytc=this.Ztc=this.ggb=
void 0}},jmb=class extends imb{P1c(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.i3a&&this.i3a.get(c.Eh);d=this.component.apply(b,d);const e=Mib(this,c);return d!==b||e!==c?ro(d,e):a}Q1c(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.i3a&&this.i3a.get(c.Eh);d=this.component.compose(b,d);const e=Mib(this,c);return d!==b||e!==c?so(d,e):a}constructor(...a){super(...a);this.i3a=void 0}},kmb=class extends imb{cHc(){return super.cHc()||!!this.LMa||!!this.sNa}P1c(a){if(!a.shift)return a;
const b=a.shift,c=Mib(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}Q1c(a){const b=a.delta,c=a.shift;var d=this.LMa;if(d){var e=d.get(a);if(e==null)e=a.delta;else{d.delete(a);d=m(this.sNa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&Mib(this,c);return e!==b||d!==c?so(e,d):a}yac(a){a=super.yac(a);if(this.LMa&&this.LMa.size)throw Error(`unconsumed setSurrogates: ${[...this.LMa.values()]}`);if(this.sNa&&this.sNa.size)throw Error(`unconsumed subSurrogates: ${[...this.sNa.keys()]}`);
return a}constructor(...a){super(...a);this.sNa=this.LMa=void 0}},lmb=class extends Up{Kg(){return new emb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.Kg(),e=new jmb(c),f=fmb.create(a,0,b.pre),g=fmb.create(Bib(b,a.YLa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(k.type===1)d.append(g.WC(k.type,k.length));else if(k.type===3)d.append(to(g,k.type));else if(h)if(h.type===1)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.WC(h.type,l);g.WC(k.type,l);d.append(uib(l));break;case 4:l=to(f,h.type);k=to(g,k.type);h=k.shift;d.append(ro(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(h.type===3){l=to(f,h.type);k=to(g,k.type);h=l.shift;var n=k.shift;h==null?d.append(ro(c.apply(l.state,k.delta),n)):n==null?(d.append(l),
uo(e,h.lm,k.delta)):(d.append(ro(l.state,{Eh:h.Eh,lm:n.lm})),uo(e,h.lm,k.delta),Lib(e,n.Eh,h.lm))}else h.type===4||k.type===4?(k=to(f,4),l=to(g,4),h=k.shift,n=l.shift,h==null?d.append(so(c.compose(k.delta,l.delta),n)):n==null?(d.append(k),uo(e,h.lm,l.delta)):(d.append(so(k.delta,{Eh:h.Eh,lm:n.lm})),uo(e,h.lm,l.delta),Lib(e,n.Eh,h.lm))):(l=Math.min(h.length,k.length),h=f.WC(h.type,l),k=g.WC(k.type,l),d.append(h.type===2||k.type===2?wib(l):qo(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return no(b,a);const c=this.component,d=fmb.create(a,b.pre,0),e=fmb.create(Bib(b,a.YLa),a.pre,0),f=this.Kg(),g=this.Kg(),h=mo.Ar(),k=new kmb(c),l=new kmb(c);for(var n=d.head,p=e.head;n||p;){if(n&&n.type===3)if(p=to(d,n.type),p.shift){var q=p.shift;n=so();g.append(n,"nocollapse");f.append(p);wo(k,q.lm,n);vo(k,q.Eh)}else g.append(sib),f.append(p);else if(n&&n.type===1)p=d.WC(n.type,n.length),g.append(qo(p.length)),f.append(p);
else if(p&&p.type===3)if(p=to(e,p.type),p.shift){n=p.shift;q=n.Eh;n=n.lm;var u=-q-1,w=so(void 0,{Eh:-n-1,lm:n});g.append(p);f.append(w);wo(l,n,w);vo(l,q);Kib(l,u,q)}else g.append(p),f.append(sib);else if(p&&p.type===1)q=e.WC(p.type,p.length),g.append(q),f.append(qo(p.length));else if(n&&p)if(n.type===4||p.type===4){q=to(d,n.type);n=to(e,p.type);const {Lt:x,pu:z}=po(h,c.transform(q.delta,n.delta));p=q.shift;n=n.shift;if(p)if(n){q=n.Eh;n=n.lm;u=p.Eh;p=p.lm;w=-q-1;const B=so(void 0,{Eh:-n-1,lm:n}),C=
so(void 0,{Eh:q,lm:n});g.append(C);f.append(B);wo(k,p,C);wo(l,n,B);vo(k,u,x);vo(l,q,z);Kib(l,w,u);Lib(l,q,p)}else q=p.Eh,n=p.lm,u=so(),g.append(u,"nocollapse"),f.append(so(z,p)),wo(k,n,u),vo(k,q,x);else n?(p=n.Eh,q=n.lm,u=-p-1,w=so(void 0,{Eh:-q-1,lm:q}),g.append(so(x,n)),f.append(w),wo(l,q,w),vo(l,p,z),Kib(l,u,p)):(g.append(so(x)),f.append(so(z)))}else q=Math.min(n.length,p.length),n=d.WC(n.type,q),p=e.WC(p.type,q),n.type===2&&p.type===2?g.append(qo(p.length)):g.append(p),f.append(n);else throw Error(`length mismatch (${a} x ${b})`);
n=d.head;p=e.head}return h.build(g.build(k),f.build(l))}fl(a){if(!a.ops.length)return a;const b=this.Kg(),c=new jmb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.fl(d.delta);const e=d.shift&&Nib(d.shift);e?(b.retain(e),uo(c,e.lm,a)):b.append(so(a));break;case 3:a=d.shift&&Nib(d.shift);d.state!=null?a?(b.retain(a),uo(c,a.lm,this.component.replace(d.state,void 0))):b.mX(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}ek(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.Hpc(a.ops[c],b.ops[c]))return!1;return!0}Hpc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.bi(a.state,b.state)&&Oib(a.shift,b.shift);case 4:return a.type===b.type&&this.component.ek(a.delta,b.delta)&&Oib(a.shift,b.shift);default:throw new r(a);}}ah(a){return new gmb(a)}identity(){return dmb}apply(a,
b){if(!b.ops.length)return a;const c=hmb.create(a,b.pre),d=new gmb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,qo(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:Gib(d,Iib(c,e.length));break;case 1:d.expand(e.length);break;case 2:ma(Fib(Iib(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(Hib(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Dl(a,b){if(!b.ops.length)return a;
const {unshift:c,f3e:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=hmb.create(a,b.post),f=new gmb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,qo(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:Gib(f,Iib(e,g.length));break;case 1:ma(Fib(Iib(e,g.length)));break;case 2:ma(Fib(Iib(e,g.length)));f.expand(g.length);break;case 3:ho(this.component,g.state,Hib(e));break;case 4:f.append(this.component.Dl(Hib(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.Kg(),c=this.Kg();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(qo(d.length));c.append(d);break;case 4:d.shift?(b.retain(Nib(d.shift)),c.append(so(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(Nib(d.shift)),c.append(ro(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),f3e:c.build()}}bi(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.bi(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof lmb&&this.component.equals(a.component)}constructor(a){super();this.component=new bmb(new cmb(a))}};var yo,Qib,mmb,Sib,Uib,kjb,Tib,rjb;yo=Object.freeze({serialize:a=>a,deserialize:a=>a});Vp=__c.Vp=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});Qib=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
mmb=class{get serializer(){this.NLc==null&&(this.NLc=this.tke());return this.NLc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.tke=a}};Sib=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Uib=Object.freeze({serialize(a){let b=0,c=0;const d=__c.Pib(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,Tj:e}},deserialize({items:a,Tj:b}){const c=[];let d=0;for(const e of b)e<0?d+=-e:e>0&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});kjb=class{serialize(a){return Ng(a,b=>this.serializer.serialize(b))}deserialize(a){return Ng(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Tib=class{serialize(a){return xo(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return xo(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};rjb=class{serialize(a){return a!=null?this.serializer.serialize(a):void 0}deserialize(a){return a!=null?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new tjb(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new amb(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var nmb,Zib,omb,pmb;nmb={next:()=>{},error:()=>{}};Zib=class{next(a){this.closed||this.o.next(this.f(a))}error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};omb=class{create(a,b=__c.Plb,c=nmb){a=this.Lz(a);b.subscribe(this.connect(a,c));return a}};
Yp=__c.Yp=class extends omb{map(a,b,c,d,e,f){return new pmb(this,a,b,c,d,e,f,Rib({serialize:b,deserialize:a},this.f6b),Rib({serialize:d,deserialize:c},this.tra))}constructor(a,b){super();this.f6b=a;this.tra=b}};
pmb=class extends Yp{Lz(a){return this.fxe(this.component.Lz(this.rja(a)))}connect(a,b){const c=this.component.connect(this.cSb(a),{next:d=>b.next(this.HJa(d)),error:d=>b.error(d)});return{next:d=>c.next(this.g3(d)),complete:()=>c.complete()}}cc(a){return this.vfb(this.component.cc(this.cSb(a)))}destroy(a,b){return this.component.destroy(this.cSb(a),this.rja(b))}Wi(a,b){return this.component.Wi(this.cSb(a),this.rja(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.HJa=b;this.g3=
c;this.vfb=d;this.rja=e;this.fxe=f;this.cSb=g;this.domain=this.component.domain.map(this.HJa,this.g3,this.vfb,this.rja)}};Zp=__c.Zp=class{connect(a){ma(this.KK==null);this.KK=a;return{next:b=>{this.KK&&Xib(this,b)},complete:()=>this.complete()}}cc(){return this.yT()}complete(){this.KK&&(this.KK=void 0,Yib(this,"mutable disconnected"))}error(a){this.KK&&(this.KK.error(a),this.KK=void 0,Yib(this,"mutable failure"))}Rq(a){var b;Xib(this,a);this.domain.isIdentity(a)||(b=this.KK)===null||b===void 0||b.next(a)}constructor(){this.clients=this.ybc=this.KK=void 0}};var qmb;$p=__c.$p=class{get(){this.NW.reportObserved();return this.value}set(a){__c.Hlb.identity(this.value,a)||(this.value=a,this.NW.reportChanged())}constructor(a){this.value=a;this.NW=Ilb("")}};
qmb=class{static F(a){O(a,{fvc:Ro,n3b:Ro})}get rq(){return this.cols.length}get wA(){return this.rows.length}get fvc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get n3b(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.vZ(a,b));c==null&&Glb()&&(c=new $p,this.values.set(this.vZ(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];d==null&&(d=this.rows[a]=this.Wed++);a=this.cols[b];
a==null&&(a=this.cols[b]=this.Ued++);(b=this.values.get(this.vZ(d,a)))?b.set(c):this.values.set(this.vZ(d,a),new $p(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.vZ(a,b));c&&c.set(void 0);this.values.delete(this.vZ(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.vZ(c,d));b!=null&&(b=b.get(),b!=null&&a(b,c,d))}}vZ(a,b){return`${a}:${b}`}constructor(){this.Wed=(qmb.F(this),0);this.Ued=0;this.rows=Tp.array([],
{deep:!1});this.cols=Tp.array([],{deep:!1});this.values=new Map}};var rmb,gjb,hjb,fjb,ijb,jjb,smb,mjb,njb,qjb,ojb,vmb,xmb,ymb,zmb;Ko=__c.Ko=class{constructor(a){this.serializer=a}};rmb=class extends Ko{Fw(a,b){return a===b}stringify(a){return JSON.stringify(a)}};gjb=class extends rmb{IO(a){return a===this.value}constructor(a){super(yo);this.value=a}};hjb=class extends rmb{IO(a){return this.values.has(a)}constructor(a){super(yo);this.values=a}};fjb=class extends rmb{constructor(a){super(yo);this.IO=a}};
ijb=class extends Ko{IO(a){return a.every(b=>this.type.IO(b))&&(!this.v5a||this.v5a(a))}Fw(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.Fw(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.v5a=b}};
jjb=class extends Ko{IO(a){return[...a].every(this.Yre)}Fw(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),a==null||!this.valueType.Fw(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.Yre=([d,e])=>smb.every(f=>!d.includes(f))&&this.keyType.IO(d)&&this.valueType.IO(e)}};smb=["$",".","\x00"];
mjb=class extends Ko{IO(a){return this.keys.every(b=>this.fields[b].IO(a[b]))&&(!this.v5a||this.v5a(a))}Fw(a,b){return this.keys.every(c=>this.fields[c].Fw(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(Vp);this.fields=a;this.v5a=b;this.keys=Object.keys(this.fields)}};
njb=class extends Ko{IO(a){return this.KL[this.vxb(a)].IO(a)}Fw(a,b){const c=this.vxb(a),d=this.vxb(b);return c===d&&this.KL[c].Fw(a,b)}stringify(a){return this.KL[this.vxb(a)].stringify(a)}constructor(a,b){super(Vp);this.KL=a;this.vxb=b}};qjb=class extends Ko{IO(a){return a==null||this.type.IO(a)}Fw(a,b){return a!=null?b!=null&&this.type.Fw(a,b):b==null}stringify(a){return a!=null?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
ojb=class extends rmb{IO(a){return typeof a==="string"&&this.WNe.test(a)}constructor(a){super(yo);this.WNe=a}};aq=__c.aq=Do(a=>typeof a==="boolean");bq=__c.bq=Do(a=>typeof a==="string");__c.tmb=Do(a=>a.length===1);__c.umb=pjb(-2147483648,2147483647);vmb=Do(a=>Number.isSafeInteger(a));cq=__c.cq=pjb(0,2147483647);__c.wmb=pjb(1,2147483647);dq=__c.dq=pjb(0,Number.MAX_SAFE_INTEGER);eq=__c.eq=Do(a=>Number.isFinite(a));fq=__c.fq=Jo(0,Number.MAX_VALUE);xmb=Do(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
ymb=Fo(fq);zmb=Fo(bq);var Amb,sjb;Amb={next:a=>ka(a==null),complete:()=>{}};
sjb=class extends Yp{Lz(a){return a!=null?this.type.Lz(a):void 0}connect(a,b){if(a==null)return Amb;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}cc(a){return a!=null?this.type.cc(a):void 0}destroy(a,b){if(a!=null&&b!=null)this.type.destroy(a,b);else if(a!=null||b!=null)throw Error(`${this.cc(a)} != ${b}`);}Wi(a,b){return a!=null?b!=null&&this.type.Wi(a,b):b==null}constructor(a,b,c){super(b,c);this.type=a;this.domain=new cmb(this.type.domain)}};__c.gq=Lo(bq);
__c.Bmb=Lo(aq);Lo(__c.umb);Lo(vmb);__c.hq=Lo(eq);__c.Cmb=Lo(cq);__c.Dmb=Lo(dq);__c.Emb=Lo(fq);var Fmb,vjb,Gmb,wjb,Hmb;Fmb=class extends Zp{DZ(a){if(a!=null)switch(a.type){case 1:ka(this.rzd.Fw(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:ka(a.delta==null);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){djb(this.rzd,a);const b=this._value.get();this.Rq(this.domain.replace(b,a))}yT(){return this.value}constructor(a,b,c){super();this.rzd=a;this.domain=b;this._value=new $p(c)}};
vjb=class extends Yp{Lz(a){a=djb(this.type,a);return new Fmb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}cc(a){return a.cc()}destroy(a,b){ejb(this.type,a.value,b)}Wi(a,b){this.type.Fw(a.value,b)||(a.value=b);return!0}constructor(a,b){super(Vp,b);this.type=a;this.domain=new bmb(new $lb((c,d)=>this.type.Fw(c,d)))}};
Gmb=class extends Zp{instantiate(a){const b=Ao(this,ujb),{mutable:c,Zw:d}=Bo(this.type,a,b);this.bsb.set(c);this.gOa=d;this.nbb=b}destroy(a){Co(this.type,a,this.gOa,this.bsb.get())}DZ(a){if(a!=null)switch(a.type){case 0:this.gOa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}yT(){return this.type.cc(this.ref)}get ref(){return this.bsb.get()}set(a){this.Rq(new amb(this.type.cc(this.bsb.get()),a))}constructor(a,b,c){super();this.type=a;
this.domain=b;a=Ao(this,ujb);const {mutable:d,Zw:e}=Bo(this.type,c,a);this.bsb=new $p(d);this.gOa=e;this.nbb=a}};wjb=class extends Yp{Lz(a){return new Gmb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}cc(a){return a.cc()}destroy(a,b){this.type.destroy(a.ref,b)}Wi(a,b){this.type.Wi(a.ref,b)||a.set(b);return!0}constructor(a,b){super(Vp,b);this.type=a;this.domain=new bmb(this.type.domain)}};__c.iq=Mo(bq);jq=__c.jq=Mo(aq);__c.kq=Mo(eq);__c.lq=Mo(cq);__c.mq=Mo(fq);Hmb=Mo(xmb);__c.Imb=Mo(ymb);
__c.nq=Mo(zmb);__c.oq=Oo(bq);__c.Jmb=Oo(aq);__c.pq=Oo(eq);__c.Kmb=Oo(cq);__c.qq=Oo(fq);var xjb=new Map,Lmb=class extends Up{create(a,b){return yjb(this,a,this.component.replace(void 0,b))}update(a,b){return yjb(this,a,this.component.update(b))}replace(a,b,c){return yjb(this,a,this.component.replace(b,c))}delete(a,b){return yjb(this,a,this.component.replace(b,void 0))}identity(){return xjb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}fl(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.fl(d),a!=null&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of zjb(a,b)){const e=this.component.compose(a.get(d),b.get(d));e!=null&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return no(b,a);const c=new Map,d=new Map,e=mo.Ar();for(const f of zjb(a,b)){const g=po(e,this.component.transform(a.get(f),b.get(f)));g.pu!=null&&c.set(f,g.pu);g.Lt!=null&&d.set(f,g.Lt)}return e.build(d,c)}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),
d);d!=null?c.set(e,d):c.delete(e)});return c}Dl(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Dl(a.get(e),d);d!=null?c.set(e,d):c.delete(e)});return c}bi(a,b){return a===b||a.size===b.size&&Array.from(zjb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.bi(d,c)})}ek(a,b){return a===b||a.size===b.size&&Array.from(zjb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.ek(d,c)})}equals(a){return this===
a||a instanceof Lmb&&this.component.equals(a)}constructor(a){super();this.component=new bmb(new cmb(a))}};__c.Mmb=class extends Zp{static F(a){O(a,{refs:Tp.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=c!=null?this.domain.replace(a,this.type.cc(c),b):this.domain.create(a,b);this.Rq(c);c=this.get(a);if(c==null)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);b!=null&&(a=this.domain.delete(a,this.type.cc(b)),this.Rq(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,
c])=>a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}[Symbol.iterator](){return this.refs[Symbol.iterator]()}yT(){return Ng(this.refs,a=>this.type.cc(a))}destroy(a){ka(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.PEa.get(c));Co(this.type,d,c.to,b)})}Wi(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);this.type.Wi(c,d)||this.set(b,d)}else this.delete(b);
for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}DZ(a){a.forEach((b,c)=>{if(b!=null)switch(b.type){case 0:b.delta!=null&&m(this.PEa.get(c)).to.next(b.delta);break;case 1:b.oldState!=null?(this.p6b(c,b.oldState),this.refs.delete(c),this.PEa.delete(c)):(ka(!this.refs.has(c)),ka(!this.PEa.has(c)));if(b.newState!=null){const {nUc:d,value:e}=Ajb(this,c,b.newState);this.refs.set(c,e);this.PEa.set(c,d)}break;default:throw new r(b);}})}p6b(a,b){const c=m(this.refs.get(a));a=m(this.PEa.get(a));
Co(this.type,b,a.to,c)}constructor(a,b,c){super();this.type=a;this.domain=b;this.refs=(__c.Mmb.F(this),new Map);this.PEa=new Map;c.forEach((d,e)=>{const {nUc:f,value:g}=Ajb(this,e,d);this.refs.set(e,g);this.PEa.set(e,f)})}};__c.Mmb.prototype.NJ=ea(90);
var Bjb=class extends Yp{Lz(a){return new __c.Mmb(this.type,this.domain,a)}Ym(a){return a}connect(a,b){return this.Ym(a).connect(b)}cc(a){return this.Ym(a).cc()}destroy(a,b){return this.Ym(a).destroy(b)}Wi(a,b){return this.Ym(a).Wi(b)}constructor(a,b){super(Vp,b);this.type=a;this.domain=new Lmb(this.type.domain)}};var Nmb={next:()=>{},complete:()=>{}},Cjb=class extends Yp{Lz(a){return djb(this.type,a)}connect(){return Nmb}cc(a){return a}destroy(a,b){ejb(this.type,a,b)}Wi(a,b){return this.type.Fw(a,b)}constructor(a,b){super(yo,b);this.type=a;this.domain=new $lb((c,d)=>this.type.Fw(c,d))}};var Ejb=class extends Up{static of(a){return new Ejb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>c==null||this.components[b].isIdentity(c))}fl(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];d!=null&&(c=this.components[e],d=c.fl(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];e!=null&&g!=null?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):e!=null?c[f]=e:g!=null&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return no(b,a);const g=mo.Ar();for(const h of new Set([...e,...f])){f=a[h];const k=b[h];f!=null&&k!=null?(e=this.components[h],f=po(g,e.transform(f,k)),e.isIdentity(f.pu)||(c[h]=f.pu),e.isIdentity(f.Lt)||
(d[h]=f.Lt)):f!=null?c[h]=f:k!=null&&(d[h]=k)}return g.build(d,c)}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].apply(a[e],c));return d}Dl(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].Dl(a[e],c));return d}bi(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].bi(a[c],b[c]))}ek(a,b){if(a===b)return!0;
const c=Object.keys(a),d=Object.keys(b);return!c.length&&!d.length||__c.Yn([...c,...d]).every(e=>{const f=a[e],g=b[e];return f!=null&&g!=null&&this.components[e].ek(f,g)})}equals(a){return this===a?!0:a instanceof Ejb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var Djb,Pmb;Djb=class{get value(){return this.computed.get()}set value(a){this.computed.set(a)}constructor(a){this.computed=a}};
__c.Omb=class extends Zp{yT(){const a=this.$ca,b=this.Rjb,c=this.JQa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].cc(this.Ob[e]);for(const e in c)d[e]=c[e].cc(this.attributes[e]);return d}destroy(a){const b=this.$ca,c=this.Rjb,d=this.JQa,e=this.tXc;for(const f in b)ejb(b[f],this.values[f],a[f]);for(const f in c)Co(c[f],a[f],this.$md[f],this.Ob[f]);for(const f in d)Co(d[f],a[f],this.BOc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}Wi(a){const b=this.$ca,c=
this.Rjb,d=this.JQa;for(const e in b)if(!b[e].Fw(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].Wi(this.Ob[e],a[e]))return!1;for(const e in d)if(!d[e].Wi(this.attributes[e],a[e]))return!1;return!0}DZ(a){for(const b in a)a[b]!=null&&(b in this.Rjb?this.$md[b].next(a[b]):b in this.JQa&&this.BOc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.$ca=b;this.Rjb=c;this.JQa=d;this.tXc=void 0;
this.values=xo(b,(g,h)=>djb(g,f[h]));a=xo(c,(g,h)=>{const k=Hjb(this,h),{Zw:l,mutable:n}=Bo(g,f[h],k);return{ref:n,gOa:l,nbb:k}});this.Ob=xo(a,g=>g.ref);this.$md=xo(a,g=>g.gOa);xo(a,g=>g.nbb);d=xo(d,(g,h)=>{const k=Ijb(this,h),{Zw:l,mutable:n}=Bo(g,f[h],k);return{ref:n,gOa:l,nbb:k}});this.attributes=xo(d,g=>g.ref);this.BOc=xo(d,g=>g.gOa);xo(d,g=>g.nbb);if(e){const {Ob:g,attributes:h,rha:k}=e.create({...this.values,...this.Ob,...this.attributes});this.BTc=xo(e.Ob,(l,n)=>g[n]);this.K3b=xo(e.attributes,
(l,n)=>h[n]);this.tXc=k}else this.BTc={},this.K3b={}}};__c.Omb.prototype.dP=ea(92);rq=__c.rq=Symbol("$impl");Pmb=class extends Yp{};
__c.Qmb=class extends Pmb{Lz(a){a=new __c.Omb(this.domain,this.values,this.Ob,this.attributes,this.computed,a);const b={...a.values,...a.Ob,...a.BTc};Object.defineProperties(b,this.rMe);Object.defineProperty(b,rq,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[rq].connect(b)}cc(a){return a[rq].cc()}destroy(a,b){a[rq].destroy(b)}Wi(a,b){return a[rq].Wi(b)}gi({values:a={},Ob:b={},attributes:c={},computed:d}){return new __c.Qmb({...this.values,...a},{...this.Ob,...b},{...this.attributes,
...c},Jjb(this.computed,d))}constructor(a,b,c,d){super(Vp,Vp);this.values=a;this.Ob=b;this.attributes=c;this.computed=d;this.domain=Fjb(xo(this.values,e=>new $lb((f,g)=>e.Fw(f,g))),xo(this.Ob,e=>e.domain),xo(this.attributes,e=>e.domain));Gjb(a,{...b,...(d===null||d===void 0?void 0:d.Ob)},{...c,...(d===null||d===void 0?void 0:d.attributes)});a=xo(c,(e,f)=>({enumerable:!0,get(){return this[rq].getAttribute(f)},set(g){this[rq].setAttribute(f,g)}}));d=xo((d===null||d===void 0?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[rq].K3b[f].value},set(g){this[rq].K3b[f].value=g}}));this.rMe={...a,...d}}};__c.Qmb.prototype.dP=ea(91);var Kjb=new __c.Qmb({},{},{});var Rmb=class extends Up{vK(a){return a}isIdentity(a){return a===0}compose(a,b){return a+b}transform(a,b){return no(b,a)}ek(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Dl(a,b){return a-b}bi(a,b){return a===b}},Smb=class extends Rmb{fl(a){return 0-a}equals(a){return this===a||a instanceof Smb}},Tmb=class extends Rmb{vK(a){ka(a>=0);return super.vK(a)}compose(a,b){ka(a>=0);ka(b>=0);return super.compose(a,b)}transform(a,b){ka(a>=0);ka(b>=0);return super.transform(a,b)}fl(a){ka(a>=0);return 0}apply(a,
b){ka(b>=0);return super.apply(a,b)}Dl(a,b){ka(b>=0);return super.Dl(a,b)}equals(a){return this===a||a instanceof Tmb}},Umb=new Smb,Vmb=new Tmb;var Wmb=class extends Zp{DZ(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}vK(a){this.Rq(this.domain.vK(a))}yT(){return this.value}constructor(a,b){super();this.domain=a;this._value=new $p(b)}},Xmb=class extends Yp{Lz(a){return new Wmb(this.domain,a)}connect(a,b){return a.connect(b)}cc(a){return a.cc()}destroy(a,b){ho(this.domain,a.value,b)}Wi(a,b){a.vK(b-a.value);return!0}},Ymb=class extends Xmb{constructor(){super(yo,yo);this.domain=Umb}},Zmb=class extends Xmb{Wi(a,
b){return b<a.value?!1:super.Wi(a,b)}constructor(){super(yo,yo);this.domain=Vmb}};new Ymb;new Zmb;__c.sq=class{get values(){return this.list.get()}get empty(){return this.values.empty}count(){return this.values.count()}toArray(){return this.values.toArray()}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){return this.values.first(a)}last(a){return this.values.last(a)}next(a,b){return this.values.next(a,b)}zl(a,b){return this.values.zl(a,b)}Ts(a,b){return this.values.Ts(a,b)}has(a){return this.values.has(a)}set(a,b){return this.values.set(a,b)}replace(a,b){return this.values.replace(a,
b)}append(a){return this.values.append(a)}prepend(a){return this.values.prepend(a)}zIa(a,b){return this.values.zIa(a,b)}insertBefore(a,b){return this.values.insertBefore(a,b)}delete(a){return this.values.delete(a)}map(a){return this.values.map(a)}flatMap(a){return this.values.flatMap(a)}filter(a){return this.values.filter(a)}forEach(a){return this.values.forEach(a)}reduce(a,b){return this.values.reduce(a,b)}some(a){return this.values.some(a)}every(a){return this.values.every(a)}constructor(a){this.list=
a}};__c.sq.prototype.FK=ea(104);__c.sq.prototype.dX=ea(99);__c.sq.prototype.ega=ea(95);__c.sq.prototype.NJ=ea(89);tq=__c.tq=class extends Zp{static F(a){O(a,{M$:Ro,yq:Ro,empty:Ro,nAb:Ro,EFb:Ro})}iKa(a){const b=Ao(this,e=>Wo(this).retain(this.HM(c)).update(e).build()),{mutable:c,Zw:d}=Bo(this.type,a,b);return{id:String(this.XHb++),value:c,to:d,from:b}}o6b(a,b){Co(this.type,a,b.to,b.value)}get M$(){const a=new Map;this.jK.forEach((b,c)=>b&&a.set(b.value,c));return a}get yq(){return this.jK.filter(__c.Ta)}get(a){return(a=this.jK[a])&&a.value}Nbc(a){return(a=this.yq[a])&&a.value}HM(a){return m(this.M$.get(a),"ref not found")}DZ(a){const b=
this.jK,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,g!=null?this.iKa(g):void 0);h&&(d.set(h.Eh,b[e]),c.set(h.lm,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;h!=null&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;h==null?ma(b[e]==null):this.o6b(h,m(b[e]));b[e]=k!=
null?this.iKa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.Eh,b[e]),c.set(g.lm,e));e++;break;default:throw new r(f);}ma(d.size===a.YLa);ma(c.size===a.YLa);for(e=0;e<a.YLa;e++)ma(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&b[b.length-1]==null;)b.length--}yT(){const a=[];this.jK.forEach((b,c)=>{b!=null&&(a[c]=this.type.cc(b.value))});return a}destroy(a){let b=0;this.jK.forEach((d,e)=>{d!=null&&(ka(e in a),this.type.destroy(d.value,a[e]),b++)});const c=a.reduce(d=>d+1,0);ka(b===c)}Wi(a){const b=
this.jK,c=Wo(this);for(let e=0;e<b.length;e++){const f=b[e];f!=null&&a[e]!=null&&this.type.Wi(f.value,a[e])||f==null&&a[e]==null?c.retain():c.change(f&&this.type.cc(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.Rq(c.build());return!0}get empty(){return!this.yq.length}count(){return this.yq.length}toArray(){return this.yq.map(a=>a.value)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}get nAb(){const a=
this.yq[0];return a&&a.value}get EFb(){const a=this.yq[this.yq.length-1];return a&&a.value}first(a){if(!a)return this.nAb;const b=this.yq.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.EFb;const b=this.yq;for(let c=b.length-1;c>=0;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.jK;for(a=this.HM(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}zl(a,b){const c=this.jK;for(a=this.HM(a)-1;a>=0;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}Ts(a,
b){a=this.M$.get(a);b=this.M$.get(b);ka(a!=null);ka(b!=null);return a<b?-1:a>b?1:0}has(a){return this.M$.has(a)}insertAt(a,b){this.Rq(Wo(this).retain(a).insert(b).build());return this.jK[a].value}set(a,b){var c;ka(a>=0);a>=this.jK.length&&(this.jK.length=a+1);const d=(c=this.jK[a])===null||c===void 0?void 0:c.value;c=d!=null?this.type.cc(d):void 0;this.Rq(Wo(this).retain(a).change(c,b).build());return this.jK[a].value}replace(a,b){a=this.HM(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,
a)}prepend(a){return this.zIa(void 0,a)}zIa(a,b){return this.insertAt(a?this.HM(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.HM(a):this.jK.length,b)}delete(a){a=Wo(this).retain(this.HM(a)).mX(this.type.cc(a)).build();this.Rq(a)}moveTo(a,b){const c=this.HM(b);if(c===a)return b;this.Rq(c<a?Wo(this).retain(c).retain({Eh:0,lm:1}).retain(a-c-1).expand({Eh:1,lm:0}).build():Wo(this).retain(a).expand({Eh:0,lm:1}).retain(c-a).retain({Eh:1,lm:0}).build());return b}map(a){return this.yq.map(({value:b,
id:c})=>a(b,c))}flatMap(a){return this.yq.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.yq.filter(b=>a(b.value,b.id)).map(b=>b.value)}forEach(a){this.yq.forEach(b=>b!=null&&a(b.value,b.id))}reduce(a,b){return this.yq.reduce((c,d)=>a(c,d.value,d.id),b)}some(a){return this.yq.some(b=>a(b.value,b.id))}every(a){return this.yq.every(b=>a(b.value,b.id))}constructor(a,b,c){super();this.type=a;this.domain=b;this.jK=(tq.F(this),void 0);this.XHb=0;ka(!c.length||c[c.length-1]!=null);this.jK=Tp.array([...c.map(d=>
this.iKa(d))],{deep:!1})}};tq.prototype.FK=ea(103);tq.prototype.dX=ea(98);tq.prototype.ega=ea(94);tq.prototype.NJ=ea(88);__c.Ljb=class extends Yp{Kg(){return this.domain.Kg()}Ym(a){return a}Lz(a){return new tq(this.type,this.domain,a)}connect(a,b){return this.Ym(a).connect(b)}cc(a){return this.Ym(a).cc()}destroy(a,b){this.Ym(a).destroy(b)}Wi(a,b){return this.Ym(a).Wi(b)}constructor(a,b){super(Vp,b);this.type=a;this.domain=new lmb(this.type.domain)}};__c.Ljb.prototype.NB=ea(106);__c.uq=class{get empty(){return this.list.empty}count(){return this.list.count()}toArray(){return this.list.toArray()}first(a){return this.list.first(a)}last(a){return this.list.last(a)}next(a,b){return this.list.next(a,b)}zl(a,b){return this.list.zl(a,b)}Ts(a,b){return this.list.Ts(a,b)}has(a){return this.list.has(a)}map(a){return this.list.map(a)}flatMap(a){return this.list.flatMap(a)}filter(a){return this.list.filter(a)}forEach(a){this.list.forEach(a)}reduce(a,b){return this.list.reduce(a,b)}some(a){return this.list.some(a)}every(a){return this.list.every(a)}[Symbol.iterator](){return this.list[Symbol.iterator]()}set(){return Yo()}replace(){return Yo()}zIa(){return Yo()}insertBefore(){return Yo()}append(){return Yo()}prepend(){return Yo()}delete(){return Yo()}constructor(a){this.list=
a}};__c.uq.prototype.FK=ea(102);__c.uq.prototype.dX=ea(97);__c.uq.prototype.ega=ea(93);__c.uq.prototype.NJ=ea(87);var $mb;$mb=class extends Up{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}fl(a){throw new r(a);}ek(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Dl(a){throw new r(a);}bi(a){throw new r(a);}equals(a){return this===a||a instanceof $mb}};__c.anb=new $mb;var bnb,cnb,gnb,hnb,inb,jnb,yq,lnb,mnb,knb;bnb=class{};vq=__c.vq=class extends bnb{get length(){return this.state.length}XSb(a){Mjb(this,a);return this.state.charAt(a)}xS(a){Njb(this,a);return[new vq(this.state.substring(0,a)),new vq(this.state.substring(a))]}kJ(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;ka(!!a)}};
bp=__c.bp=class extends bnb{get length(){return 1}XSb(a){Mjb(this,a);return this.state}xS(a){Njb(this,a);throw Error();}kJ(a){return new bp(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
wq=__c.wq=class extends bnb{get length(){return this.state}XSb(a){Mjb(this,a)}xS(a){Njb(this,a);return[new wq(a),new wq(this.state-a)]}kJ(){return this}toString(){return this.state<=7?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;ka(!!a)}};
__c.xq=class{get length(){return this.pla+this.$q+this.uBc}pd(a){return new cnb(this,a)}cursor(a,b){return new __c.dnb(this,a,b)}kJ(a){const b=this.kA.map(c=>c.kJ(a));return new __c.xq(b,this.pla,this.$q,this.uBc)}eb(){return this.kA.map(a=>a.type===0?a.state:"").join("")}forEach(a,b){for(const c of this.kA)switch(c.type){case 0:b.eb&&b.eb(c.state);break;case 1:b.item(c.state);break;case 2:b.Tj&&b.Tj(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.Tj&&b.Tj(a)}map(a,b){const c=
this.kA.map(d=>{switch(d.type){case 0:return b.eb(d.state);case 1:return b.item(d.state);case 2:return b.Tj(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.Tj(a));return c}reduce(a,b){return this.kA.reduce((c,d)=>{switch(d.type){case 0:return a.eb(c,d.state);case 1:return a.item(c,d.state);case 2:return a.Tj?a.Tj(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){ka(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.enb;
const d=new __c.fnb;c=this.cursor(b);c.zR(a);c.zR(b-a,{item:e=>d.item(e),eb:e=>d.zf(e),Tj:e=>d.Q7(e)});return d.build()}toString(){return this.kA.join("")}constructor(a,b,c,d){this.kA=a;this.pla=b;this.$q=c;this.uBc=d;a=a.length?a[a.length-1]:void 0;ka(!a||a.type!==2)}};__c.xq.prototype.mFb=ea(107);__c.enb=new __c.xq([],0,0,0);
__c.fnb=class{Uia(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(this.mode!=null){switch(this.mode){case 0:this.kA.push(new vq(this.Wjb));this.Qub+=this.Wjb.length;this.Wjb="";break;case 2:this.kA.push(new wq(this.Xjb));this.ARb+=this.Xjb;this.Xjb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.zf(a.state);case 1:return this.item(a.state);case 2:return this.Q7(a.state);default:throw new r(a);}}zf(a){a&&(this.Uia(0),this.Wjb+=a);return this}item(a){this.flush();
this.kA.push(new bp(a));this.aic++;return this}Q7(a){a>0&&(this.Uia(2),this.Xjb+=a);return this}append(a,b=0){a.forEach(b,{eb:c=>this.zf(c),item:c=>this.item(c),Tj:c=>this.Q7(c)});return this}get length(){return this.Qub+this.aic+this.ARb}build(){this.mode!==2&&this.flush();return this.length?new __c.xq(this.kA,this.Qub,this.aic,this.ARb):__c.enb}constructor(){this.kA=[];this.mode=void 0;this.Wjb="";this.ARb=this.aic=this.Qub=this.Xjb=0}};
cnb=class{get head(){return this.um}get prevValue(){return this.djb&&this.djb.XSb(this.djb.length-1)}Wn(a){const b=m(this.um),c=b.length;ka(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.xS(a),this.um=a[1],this.djb=a[0];this.um=this.kA[this.i++];return this.djb=b}finish(){ma(this.um==null,"unconsumed reader head: {}",this.um)}constructor(a,b=0){this.i=0;this.djb=void 0;this.kA=(b=Math.max(0,b-a.length))?[...a.kA,new wq(b)]:a.kA;this.um=this.kA.length?this.kA[this.i++]:void 0}};
__c.dnb=class{get prevValue(){return this.pd.prevValue}move(a,b,c){for(c=__c.Ojb(this.Afb,c);a;){var d=this.pd.head;if(d)switch(d=this.pd.Wn(b||d.type!==2?Math.min(d.length,a):d.length),d.type){case 0:c&&c.eb&&c.eb(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.Tj&&c.Tj(d.state);b&&(a-=d.length);break;default:throw new r(d);}else ka(b,"not enough characters or items: {}",a),c&&c.Tj&&c.Tj(a),a-=a}}zR(a,b){this.move(a,!0,b)}Fn(a,b){this.move(a,!1,b)}finish(){this.pd.finish()}constructor(a,
b,c){this.Afb=c;this.pd=a.pd(b)}};__c.dnb.prototype.$Ja=ea(108);__c.dnb.prototype.FK=ea(101);gnb=class{};hnb=class extends gnb{get Qaa(){return this.length}get s1(){return this.length}JPb(a){Pjb(this,a);return this.xS(a)}IPb(a){Qjb(this,a);return this.xS(a)}xS(a){return[new hnb(a),new hnb(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
inb=class extends gnb{get Qaa(){return 1}get s1(){return 1}JPb(a){Pjb(this,a);throw Error();}IPb(a){Qjb(this,a);throw Error();}map(a){return new inb(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
jnb=class extends gnb{get Qaa(){return 0}get s1(){return this.state.length}JPb(a){Pjb(this,a);throw Error();}IPb(a){Qjb(this,a);const [b,c]=this.state.xS(a);return[new jnb(b),new jnb(c)]}map(a,b){return new jnb(this.state.kJ(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
yq=class extends gnb{get Qaa(){return this.oldState.length}get s1(){return this.newState.length}JPb(a){Pjb(this,a);return this.xS(a)}IPb(a){Qjb(this,a);return this.xS(a)}xS(a){const [b,c]=this.oldState.xS(a),[d,e]=this.newState.xS(a);return[new yq(b,d),new yq(c,e)]}map(a,b){return new yq(this.oldState.kJ(b),this.newState.kJ(b))}toString(){return this.oldState.type===2?this.newState.type===2?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:this.newState.type===2?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;oa(a.length,b.length)}};
lnb=class{pd(a,b){return new knb(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}kJ(a,b){const c=this.ops.map(d=>d.map(a,b));return new lnb(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};mnb=new lnb([],0,0);
__c.nnb=class{Uia(a,b,c){if(this.G1!==a||this.Imc!==b||this.cmc!==c)switch(this.flush(),this.G1=a,this.Imc=b,this.cmc=c,a){case 0:break;case 2:c===0&&(this.gY="");break;case 3:b===0&&(this.mya="");c===0&&(this.gY="");break;default:throw new r(a);}}flush(){if(this.G1!=null){switch(this.G1){case 0:this.push(new hnb(this.acc));this.acc=0;break;case 2:var a=this.gY!=null?new vq(this.gY):new wq(this.acc);this.push(new jnb(a));this.gY=void 0;this.acc=0;break;case 3:a=this.mya!=null?new vq(this.mya):new wq(this.acc);
const b=this.gY!=null?new vq(this.gY):new wq(this.acc);this.push(new yq(a,b));this.gY=this.mya=void 0;this.acc=0;break;default:throw new r(this.G1);}this.cmc=this.Imc=this.G1=void 0}}push(a){this.ops.push(a);this.pre+=a.Qaa;this.post+=a.s1}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.Fwa(a.state);case 3:return $o(this,a.oldState,a.newState);default:throw new r(a);}}Fwa(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){ka(a>=0);a&&(this.Uia(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new inb(a));this.pre++;this.post++;return this}expand(a){ka(a>=0);a&&(this.Uia(2,void 0,2),this.acc+=a);return this}insert(a){typeof a==="string"?a&&(this.Uia(2,void 0,0),this.gY+=a):(this.flush(),this.push(new jnb(new bp(a))));return this}Iqa(a){ka(a>=0);a&&(this.Uia(3,2,2),this.acc+=a);return this}d3a(a){typeof a===
"string"?a&&(this.Uia(3,2,0),this.acc+=a.length,this.gY+=a):(this.flush(),this.push(new yq(new wq(1),new bp(a))));return this}mX(a){typeof a==="string"?a&&(this.Uia(3,0,2),this.acc+=a.length,this.mya+=a):(this.flush(),this.push(new yq(new bp(a),new wq(1))));return this}change(a,b){typeof a==="string"?typeof b==="string"?(oa(a.length,b.length),a&&(this.Uia(3,0,0),this.mya+=a,this.gY+=b)):(oa(a.length,1),this.flush(),this.push(new yq(new vq(a),new bp(b)))):typeof b==="string"?(oa(1,b.length),this.flush(),
this.push(new yq(new bp(a),new vq(b)))):(this.flush(),this.push(new yq(new bp(a),new bp(b))));return this}build(){this.G1!==0&&this.flush();return new lnb(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.cmc=this.Imc=this.G1=void 0;this.acc=0;this.gY=this.mya=void 0}};__c.nnb.prototype.Gwa=ea(111);
knb=class{get head(){return this.um}finish(){ma(this.um==null)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new hnb(b)]:a.ops;this.i=0;this.um=this.ops[this.i++]}};
__c.onb=class extends Up{Kg(){return new __c.nnb(a=>this.component.isIdentity(a))}ah(){return new __c.fnb}id(){return mnb}pO(){return __c.enb}isIdentity(a){return!a.ops.length||a.ops.every(b=>b.type===0)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.pd(0,b.pre),d=b.pd(a.post,0),e=this.Kg();for(;;){let g=c.head;var f=d.head;if(!f)break;f.type===2?(g=void 0,f=ap(d)):g&&(f=Math.min(g.s1,f.Qaa),g=Sjb(c,f),f=__c.Rjb(d,f));if(f.type===2)e.Fwa(f.state);else if(g)g.type===2?e.Fwa(Ujb(this,
g.state,f)):f.type===0?e.op(g):g.type===0?e.op(f):g.type===1?f.type===1?e.update(this.component.compose(g.delta,f.delta)):$o(e,Vjb(this,f.oldState,g),f.newState):$o(e,g.oldState,Ujb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return no(b,a);const c=this.Kg(),d=this.Kg(),e=a.pd(b.pre,0),f=b.pd(a.pre,0),g=mo.Ar();for(;;){var h=e.head,k=f.head;if(!h&&!k)break;h&&h.type===2?(h=ap(e),k=void 0):
k&&k.type===2?(h=void 0,k=ap(f)):h&&k&&(k=Math.min(h.Qaa,k.Qaa),h=__c.Rjb(e,k),k=__c.Rjb(f,k));if(h&&h.type===2)d.retain(h.s1),c.op(h);else if(k&&k.type===2)d.op(k),c.retain(k.s1);else if(h&&k)h.type===0||k.type===0?(d.op(k),c.op(h)):h.type===3?(d.retain(h.s1),$o(c,Ujb(this,h.oldState,k),h.newState),qib(g,k.type===3?!cp(this,h.newState,k.newState):!this.component.isIdentity(k.delta))):k.type===3?($o(d,Ujb(this,k.oldState,h),k.newState),c.retain(k.s1),rib(g,!this.component.isIdentity(h.delta))):(h=
po(g,this.component.transform(h.delta,k.delta)),d.update(h.Lt),c.update(h.pu));else throw Error(`length mismatch (${a} x ${b})`);}e.finish();f.finish();return g.build(d.build(),c.build())}fl(a){if(!a.ops.length)return a;const b=this.Kg();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.fl(c.delta));break;case 2:a=c.state;a.type===2?b.retain(a.length):b.mX(a.state);break;case 3:a=c.oldState;const d=c.newState;a.type===2&&d.type===2?b.retain(a.length):
$o(b,d,a);break;default:throw new r(c);}return b.build()}ek(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.Hpc(a.ops[c],b.ops[c]))return!1;return!0}Hpc(a,b){switch(a.type){case 0:return b.type===0&&a.length===b.length;case 1:return b.type===1&&this.component.ek(a.delta,b.delta);case 2:return b.type===2&&cp(this,a.state,b.state);case 3:return b.type===3&&cp(this,a.oldState,b.oldState)&&cp(this,a.newState,b.newState);default:throw new r(a);}}identity(){return mnb}apply(a,
b){const c=this.ah(),d=a.pd(b.pre);for(a=b.pd(a.length,0);;){b=d.head;var e=a.head;if(!e)break;e.type===2?(b=void 0,e=ap(a)):b&&(e=Math.min(b.length,e.Qaa),b=d.Wn(e),e=__c.Rjb(a,e));if(e.type===2)c.region(e.state);else if(b)c.region(Ujb(this,b,e));else break}d.finish();a.finish();return c.build()}Dl(a,b){const c=this.ah(),d=a.pd(b.post);for(a=b.pd(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;e.type===2?(b=d.Wn(e.s1),e=ap(a)):(e=Math.min(b.length,e.s1),b=d.Wn(e),e=Sjb(a,e));if(e.type===2)__c.Tjb(this,
b,e.state);else if(b)c.region(Vjb(this,b,e));else break}d.finish();a.finish();return c.build()}bi(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.pd();b=b.pd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!cp(this,c,d))return!1;a.Wn(c.length);b.Wn(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.onb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.onb.prototype.mE=ea(116);__c.dp=new __c.onb(__c.anb);
ep=__c.ep={item:a=>{throw new r(a);}};var pnb;pnb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.eb);break;case 2:a.insert&&a.insert(d.eb);break;case 1:a.delete&&a.delete(d.eb);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static Ar(){return new fp}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
fp=__c.fp=class{static insert(a,b){return(new fp).retain(a).insert(b).build()}static delete(a,b){return(new fp).retain(a).delete(b).build()}retain(a){ka(a>=0);a>0&&(this.I7(0),this.v0a+=a);return this}insert(a){a.length>0&&(this.I7(2),this.Jdb+=a);return this}delete(a){a>0&&(this.I7(1),this.MSa+=a);return this}I7(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.v0a;ka(d>0);c.call(b,{type:0,eb:d});this.pre+=this.v0a;this.post+=this.v0a;this.v0a=0;break;case 2:b=this.ops;
c=b.push;d=this.Jdb;ka(d.length>0);c.call(b,{type:2,eb:d});this.post+=this.Jdb.length;this.Jdb="";break;case 1:b=this.ops;c=b.push;d=this.MSa;ka(d>0);c.call(b,{type:1,eb:d});this.pre+=this.MSa;this.post+=this.MSa;this.MSa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){this.mode!==0&&this.I7();return new pnb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.v0a=0;this.Jdb="";this.MSa=0}};__c.qnb=class extends Zp{static F(a){O(a,{eb:Ro})}get eb(){return this.state.get().eb()}insert(a,b){this.Rq(__c.Wjb(this.state.get(),fp.insert(a,b)))}delete(a,b){this.Rq(__c.Wjb(this.state.get(),fp.delete(a,b)))}DZ(a){const b=Xjb(this.state.get(),a);this.state.set(__c.dp.apply(this.state.get(),a));this.subject.next(b)}yT(){return this.state.get()}destroy(a){ka(__c.dp.bi(this.state.get(),a))}Wi(a){return __c.dp.bi(this.state.get(),a)}constructor(a,b){super();this.domain=a;this.state=(__c.qnb.F(this),
void 0);this.subject=new __c.Nlb;this.state=new $p(b)}};__c.qnb.prototype.$N=ea(121);var rnb=class extends omb{Ym(a){return a}Lz(a){return new __c.qnb(this.domain,a)}connect(a,b){return this.Ym(a).connect(b)}cc(a){return this.Ym(a).cc()}destroy(a,b){this.Ym(a).destroy(b)}Wi(a,b){return this.Ym(a).Wi(b)}constructor(){super();this.domain=__c.dp}};new rnb;__c.snb=class extends Up{get target(){return m(this.YYb)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}fl(a){return this.target.fl(a)}ek(a,b){return this.target.ek(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Dl(a,b){return this.target.Dl(a,b)}bi(a,b){return this.target.bi(a,b)}equals(a){return this===a||a instanceof __c.snb&&this.target.equals(a.target)}constructor(){super();
this.YYb=void 0}};__c.snb.prototype.Jia=ea(123);__c.zq=class extends Yp{get type(){return m(this.$Yb)}Lz(a){return this.type.Lz(a)}connect(a,b){return this.type.connect(a,b)}cc(a){return this.type.cc(a)}destroy(a,b){this.type.destroy(a,b)}Wi(a,b){return this.type.Wi(a,b)}constructor(){super(new mmb(()=>this.type.f6b),new mmb(()=>this.type.tra));this.$Yb=void 0;this.domain=new __c.snb}};__c.zq.prototype.Jia=ea(122);var tnb,znb,unb,vnb;tnb=Zjb({},{});
__c.ynb=class{pd(a){return new unb(this,a)}cursor(a,b){return new vnb(this,a,b)}forEach(a,{grad:b,Gc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.FF,d.lH);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,Gc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.FF,e.lH);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,Gc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.FF,e.lH):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){ka(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.wnb;const d=new __c.xnb;c=this.cursor(b);c.move(a);d.attrs(c.iP,c.Tha);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).Gc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.lH))b.push(`${c}:${d!=
null?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;ka(!a||a.type!==1)}};__c.ynb.prototype.EGb=ea(124);__c.wnb=new __c.ynb([],0);
__c.Anb=class{pd(a,b){return new znb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!ckb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.bkb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${e.so!=null?`"${e.so}"`:"null"}=>${e.sn!=null?`"${e.sn}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.Bnb=new __c.Anb([],0,0);
znb=class{get bN(){return this.asb}get next(){return this._next}Nt(a,b){const c=m(this._next);ma(c.type===a,"{} != {}",c.type,a);ka(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.asb[d]=f:delete this.asb[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.Y1a&&(this._next=dkb(this.Y1a,Xn(this.asb,()=>({r:void 0}))),this.Y1a=0));return c.changes}Iz(a){return this.Nt(0,
a)}yea(a){return this.Nt(1,a)}finish(){ma(!this._next)}constructor(a,b=0,c=0){this.i=0;this.asb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.Y1a=Math.max(0,b-a.pre,c-a.post);!this._next&&this.Y1a&&(this._next=dkb(this.Y1a),this.Y1a=0)}};
unb=class{get head(){return this.um}get iP(){return this.sI}get Tha(){return this.XYb}Wn(a){var b=this.um;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.um=a<b?$jb(b-a):this.input[this.i++];return a}apply(a){__c.hp(a.FF,a.lH,(b,c,d)=>{c!=null&&d!=null?(this.sI[b]=c,this.XYb[b]=d):(delete this.sI[b],delete this.XYb[b])})}Mv(){const a=this.um;if(!a||a.type===1)return tnb;this.um=this.input[this.i++];this.apply(a);return a}finish(){ma(!this.um)}constructor(a,
b=0){this.i=0;this.sI={};this.XYb={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,$jb(b)]:a.items;this.um=this.input.length?this.input[this.i++]:void 0}};
vnb=class{get kB(){return this.pd.length-this.Gda}get iP(){return this.pd.iP}get Tha(){return this.pd.Tha}move(a,b){var c=this.Afb;b=c?b?{cells:__c.Zo(c.cells,b.cells)}:c:b;ka(a>=0,"{} < 0",a);a=this.Gda+a;for(ka(a<=this.pd.length,"{} > {}",a,this.pd.length);this.Gda<a;){c=this.pd.Mv();const d=this.pd.Wn(a-this.Gda);this.Gda+=d;b&&b.cells&&b.cells(d,c.FF,this.iP,c.lH,this.Tha)}}finish(){this.pd.Mv();this.pd.finish()}constructor(a,b,c){this.Afb=c;this.Gda=0;this.pd=new unb(a,b)}};
__c.xnb=class{Zm(a,b,c){this.ss[a]!==c?(this.FF[a]=b,this.lH[a]=c):(delete this.FF[a],delete this.lH[a]);return this}attrs(a,b){__c.hp(a,b,(c,d,e)=>this.Zm(c,d,e));return this}Gc(a){a>0&&(Object.keys(this.FF).length&&(this.length&&(this.items.push($jb(this.length)),this.length=0),this.items.push(Zjb(this.FF,this.lH)),__c.hp(this.FF,this.lH,(b,c,d)=>{if(c!=null){this.as[b]=c;this.ss[b]=d;var e;((e=this.attributes[b])!==null&&e!==void 0?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],delete this.ss[b]}),
this.FF={},this.lH={}),this.length+=a,this.W2+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),Gc:c=>this.Gc(c)});return this}build(){for(const a of __c.gp(this.as))this.Zm(a);for(const a of __c.gp(this.FF))this.Zm(a);Object.keys(this.FF).length?(ma(!!this.length,"attributes still open: {}",this.FF),this.items.push($jb(this.length)),this.items.push(Zjb(this.FF,this.lH)),this.length=0,this.FF={},this.lH={}):this.W2-=this.length;return new __c.ynb(this.items,this.W2,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.ss={};this.length=this.W2=0;this.FF={};this.lH={}}};var jp,Cnb,Dnb,Enb,hkb,Gnb,Fnb,Inb,Jnb,Knb,Hnb;jp=class{static from(a){if(a instanceof jp)return a;if(Array.isArray(a)){const [b,c]=a;return new jp(b,c)}return new jp(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
Cnb=class{get isEmpty(){return!this.Se.size}slice(a,b){ka(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.Se){var d=b<f.from||f.to<a?void 0:new jp(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new Cnb(c)}toString(){return[...this.Se].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.Se=a}};Dnb=new Cnb;
Enb=class{range(a,b){b?this.B8.set(a,jp.from(b)):this.B8.delete(a);return this}Se(a){a.forEach((b,c)=>this.B8.set(c,jp.from(b)));return this}build(){return this.B8.size?new Cnb(this.B8):Dnb}constructor(){this.B8=new Map}};hkb=class{toString(){return`${this.Raa||"_"}->${this.Maa||"_"}`}constructor(a,b){this.Raa=a;this.Maa=b}};Gnb=class{toString(){return`${Fnb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};Fnb={[0]:"R",[1]:"I"};
Inb=class{pd(a,b){return new Hnb(this,a,b)}toString(){const a=this.mea.join(""),b=[...this.Se].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.mea=a;this.Se=b;this.pre=c;this.post=d}};Jnb=new Inb([],new Map,0,0);
Knb=class{append(a,b){ka(b>=0,"{} < 0",b);if(!b)return this;this.G1===a?this.length+=b:(this.G1!=null&&this.ops.push(new Gnb(this.G1,this.length)),this.G1=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.j0a(a,void 0,b)}j0a(a,b,c){b=new hkb(b&&jp.from(b),c&&jp.from(c));this.Se.set(a,b);return this}bMa(a){a.forEach((b,c)=>this.Se.set(c,
b));return this}build(){const a=this.G1,b=this.length;a===0?(this.pre-=b,this.post-=b):a!=null&&this.ops.push(new Gnb(a,b));return this.ops.length||this.Se.size?new Inb(this.ops,this.Se,this.pre,this.post):Jnb}constructor(){this.ops=[];this.G1=void 0;this.post=this.pre=this.length=0;this.Se=new Map}};
Hnb=class{get next(){return this._next}get Jrc(){return this.$rb}get cLb(){return this.bQa}get AIa(){return this.bQa-this.$rb}Nt(a,b){const c=m(this._next);ma(c.type===a,"{} != {}",c.type,a);ka(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new Gnb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}Iz(a){this.Nt(0,a);this.$rb+=a;this.bQa+=a}yea(a){this.Nt(1,a);this.bQa+=a}finish(){ma(!this._next)}constructor(a,b=0,c=0){this.bQa=this.$rb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.mea,new Gnb(0,b)]:a.mea;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.Lnb=class extends Up{ah(){return new Enb}Kg(){return new Knb}isIdentity(a){return!a.mea.length&&!a.Se.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of ikb(a.Se,b.Se)){var g=a.Se.get(f),h=b.Se.get(f);g&&h?(ka(ip(g.Maa,h.Raa)),e.set(f,new hkb(g.Raa,h.Maa))):g?c.set(f,g):h&&d.set(f,h)}f=this.Kg();g=a.pd(0,b.pre);a=b.pd(a.post,0);b=g.next;for(h=a.next;h;){if(h.type===1)b=h.length,kp(c,void 0,g.cLb+a.AIa,b),a.yea(b),f.insert(b);
else if(b)b.type===1?(b=Math.min(b.length,h.length),kp(d,a.Jrc-g.AIa,void 0,-b),g.yea(b),a.Iz(b),f.insert(b)):(b=Math.min(b.length,h.length),g.Iz(b),a.Iz(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.bMa(e);f.bMa(c);f.bMa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return no(b,a);var c=new Map,d=new Map;const e=new Map,f=mo.Ar();for(var g of ikb(a.Se,b.Se)){var h=a.Se.get(g),k=b.Se.get(g);h&&k?(ka(ip(h.Raa,k.Raa)),e.set(g,
new hkb(k.Maa,h.Maa)),qib(f)):h?c.set(g,h):k&&d.set(g,k)}h=a.pd(b.pre,0);k=b.pd(a.pre,0);g=this.Kg();const l=this.Kg();var n=h.next;let p=k.next;for(;n||p;){if(n&&n.type===1)n=n.length,kp(d,k.Jrc+h.AIa,k.cLb+h.AIa,n),h.yea(n),l.retain(n),g.insert(n);else if(p&&p.type===1)n=p.length,kp(c,h.Jrc+k.AIa,h.cLb+k.AIa,n),kp(e,void 0,h.cLb+k.AIa,n),k.yea(n),l.insert(n),g.retain(n);else if(n&&p)n=Math.min(n.length,p.length),h.Iz(n),k.Iz(n),l.retain(n),g.retain(n);else throw Error(`unreachable case: ${n} x ${p}`);
n=h.next;p=k.next}h.finish();k.finish();d=l.bMa(d).build();c=g.bMa(c).bMa(e).build();oa(d.post-d.pre,b.post-b.pre);oa(c.post-c.pre,a.post-a.pre);return f.build(d,c)}fl(a){if(!a.Se.size)return Jnb;const b=new Map(a.Se);ekb(a,{insert:(c,d,e)=>kp(b,e,void 0,c)});a=Ng(b,c=>new hkb(c.Maa,c.Raa));return new Inb([],a,0,0)}ek(a,b){if(a===b)return!0;if(a.mea.length!==b.mea.length||a.Se.size!==b.Se.size)return!1;for(let e=0;e<a.mea.length;e++){var c=a.mea[e],d=b.mea[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.Se.keys())if(c=
a.Se.get(e),d=b.Se.get(e),c?!(d&&ip(c.Raa,d.Raa)&&ip(c.Maa,d.Maa)):d)return!1;return!0}id(){return Jnb}identity(){return Jnb}apply(a,b){if(this.isIdentity(b)||!a.Se.size&&!b.Se.size)return a;const c=this.ah(),d=new Map(a.Se);for(const [e,f]of b.Se)ka(ip(a.Se.get(e),f.Raa)),d.delete(e),c.range(e,f.Maa);ekb(b,{insert:(e,f,g)=>gkb(d,g,e)});return c.Se(d).build()}Dl(a,b){if(this.isIdentity(b)||!a.Se.size&&!b.Se.size)return a;const c=this.ah(),d=new Map(a.Se);for(const [e,f]of b.Se)ka(ip(a.Se.get(e),f.Maa)),
d.delete(e),c.range(e,f.Raa);ekb(b,{insert:(e,f)=>gkb(d,f,-e)});return c.Se(d).build()}bi(a,b){const c=a.Se,d=b.Se;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>ip(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.Lnb}constructor(){super();this.pO=Dnb}};__c.Lnb.prototype.mE=ea(115);__c.Mnb=new __c.Lnb;var Nnb=class extends Up{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=jkb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=jkb(a.key,b.key);a=this.components[c].transform(a.value,b.value);return pib(a,d=>({key:c,value:d}))}fl(a){return{key:a.key,value:this.components[a.key].fl(a.value)}}ek(a,b){return a.key===b.key&&this.components[a.key].ek(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=jkb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Dl(a,b){const c=jkb(a.key,b.key);return{key:c,value:this.components[c].Dl(a.value,b.value)}}bi(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].bi(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var Onb=class extends Up{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}fl(a){return this.sum.fl(a)}ek(a,b){return this.sum.ek(a,b)}identity(a){return this.sum.identity(kkb(this,a))}apply(a,b){return this.sum.apply(kkb(this,a),b).value}Dl(a,b){return this.sum.Dl(kkb(this,a),b).value}bi(a,b){return a===b||this.sum.bi(kkb(this,a),kkb(this,b))}equals(a){return this===a||a instanceof Onb&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.dTa=b;this.sum=new Nnb(this.components)}};var lkb=class extends Yp{create(a,b,c){return super.create(a,b,c)}Lz(a){const b=this.dTa(a);return this.KL[b].Lz(a)}connect(a,b){const c=this.wxb(a),d=this.KL[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{ka(e.key===c);d.next(e.value)},complete:()=>d.complete()}}cc(a){const b=this.wxb(a);return this.KL[b].cc(a)}destroy(a,b){const c=this.wxb(a),d=this.dTa(b);ka(c===d);this.KL[c].destroy(a,b)}Wi(a,b){const c=this.wxb(a),d=this.dTa(b);return c===d&&this.KL[c].Wi(a,
b)}constructor(a,b,c){super(Vp,Vp);this.KL=a;this.dTa=b;this.wxb=c;this.domain=new Onb(Xn(this.KL,d=>d.domain),this.dTa)}};var Pnb=class extends Up{isIdentity(){return!0}compose(){return 1}transform(){return no(1,1)}fl(){return 1}ek(){return!0}identity(){return 1}apply(){return 1}Dl(){return 1}bi(){return!0}equals(a){return this===a||a instanceof Pnb}constructor(){super();this.unit=1}},Qnb=new Pnb;var Rnb;Rnb=class extends Yp{Lz(a){return a}connect(){return{next:()=>{},complete:()=>{}}}cc(a){return a}destroy(){}Wi(){return!0}constructor(){super(yo,yo);this.domain=Qnb}};__c.Snb=new Rnb;var Tnb=new Map,Unb=class extends Up{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>b===0)}compose(a,b){return nkb(a,b)}transform(a,b){return no(b,a)}fl(a){return a.size?Ng(a,b=>-b):a}ek(a,b){return mkb(a,b)}identity(){return Tnb}apply(a,b){return nkb(a,b)}Dl(a,b){return nkb(a,this.fl(b))}bi(a,b){return mkb(a,b)}equals(a){return this===a||a instanceof Unb}};var Vnb,Wnb;
Vnb=class extends Zp{static F(a){O(a,{values:Ro.struct})}DZ(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}yT(){return new Map(this.map)}Wi(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.Rq(c);return!0}add(a){const b=this.map.get(a)||0;b>0||this.Rq(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.Rq(new Map([[a,-b]]))}has(a){return(this.map.get(a)||0)>
0}get values(){return[...okb(this.map,a=>a>0).keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}constructor(a,b){super();this.domain=a;this.map=(Vnb.F(this),void 0);this.map=new Jlb(b)}};Wnb=class extends Yp{Lz(a){return new Vnb(this.domain,a)}connect(a,b){return a.connect(b)}cc(a){return a.cc()}destroy(a,b){ka(this.domain.bi(a.cc(),b))}Wi(a,b){return a.Wi(b)}constructor(){super(Vp,Vp);this.domain=new Unb}};__c.Xnb=new Wnb;var Ynb,Znb,Aq,$nb,aob,bob,cob,dob,eob,fob,gob,hob,iob,job,kob,lob;Ynb=Vo({attributes:{ugc:Mo(Eo(1,2,3,4)),value:Mo(eq)}});Znb=__c.Po(cq,Ynb);Aq=Vo({attributes:{D1a:__c.lq,Ki:__c.lq},Ob:{I2:Znb}});$nb=Aq.gi({values:{type:Eo("brightness")}});aob=Aq.gi({values:{type:Eo("contrast")}});bob=Aq.gi({values:{type:Eo("highlights")}});cob=Aq.gi({values:{type:Eo("shadows")}});dob=Aq.gi({values:{type:Eo("whites")}});eob=Aq.gi({values:{type:Eo("blacks")}});fob=Aq.gi({values:{type:Eo("saturation")}});gob=Aq.gi({values:{type:Eo("vibrance")}});
hob=Aq.gi({values:{type:Eo("temperature")}});iob=Aq.gi({values:{type:Eo("tint")}});job=Go({id:bq});kob=Aq.gi({values:{type:Eo("lut"),bYa:job}});lob=lp({brightness:$nb,contrast:aob,highlights:bob,shadows:cob,whites:dob,blacks:eob,saturation:fob,vibrance:gob,temperature:hob,tint:iob,lut:kob},a=>a.type,a=>a.type);__c.mob=Xo(lob);var nob,qob,rob,uob,Bq,Dob,Kob,Lob,Nob,Pob,Rob,Tob,Vob,Wob,Xob,Yob,Zob,$ob,bpb,cpb,epb,gpb,hpb;nob=Go({id:bq,version:cq});__c.oob=Vo({values:{app:nob},attributes:{Kka:Mo(__c.ljb(bq,bq))}});__c.pob=Jo(-1,1);qob=Jo(0,100);rob=Jo(-100,100);__c.sob=Jo(0,1);__c.tob=Jo(-180,180);uob=Mo(qob);Bq=Mo(rob);__c.vob=Mo(__c.sob);__c.wob=Mo(__c.tob);Cq=__c.Cq=Io(__c.Rlb);__c.xob=Lo(Cq);__c.yob=Mo(__c.xob);__c.zob=Io(/^100%$/);__c.Aob=Io(/^[0-9]+(\.[0-9]+)?%$/);__c.Bob=Io(/^[0-9]+(\.[0-9]+)?px/);__c.Cob=__c.Po(Qo(bq));
__c.Po(__c.Snb);Dob=pjb(0,10);__c.Eob=Fo(Dob,a=>a.length<=10);__c.Fob=Mo(__c.Eob);__c.Gob=Io(pkb("L"));__c.Hob=Io(pkb("T"));__c.Iob=Mo(Eo(1,2,3));__c.Job=Go({text:bq,A9:aq});Kob=Go({top:eq,left:eq,width:fq,height:fq,rotation:__c.tob});Lob=Go({id:bq,fg:eq});__c.Mob=Vo({attributes:{wba:Oo(Lob),brightness:Bq,contrast:Bq,saturation:Bq,uZ:Bq,y2a:uob,blur:Bq,Fja:Bq,GBa:Bq,vla:uob,isa:uob,highlights:Bq,p7:Bq,MZ:uob,qva:uob}});Nob=No(Lo(__c.Mob));
__c.Oob=Vo({values:{media:nob},Ob:{filter:Nob},attributes:{pE:Oo(nob),Lf:Oo(Kob),W:__c.vob,tg:Mo(__c.ljb(Cq,Cq)),altText:Oo(__c.Job)}});Pob=No(Lo(__c.Oob));__c.Qob=Eo(1,2);Rob=Go({qd:fq,Sv:fq});__c.Sob=Vo({values:{video:bq,id:__c.gq},Ob:{filter:Nob,Ct:__c.mob},attributes:{Lf:Mo(Kob),W:__c.vob,tg:Mo(__c.ljb(Cq,Cq)),altText:Oo(__c.Job),trim:Oo(Rob),eqa:Mo(__c.Qob),autoplay:jq,playbackRate:Oo(Jo(.25,4)),volume:Mo(Jo(0,4))}});Tob=No(Lo(__c.Sob));__c.Uob=Go({top:eq,left:eq});Vob=Go({width:fq,height:fq});
Wob=Go({color:Cq,W:__c.sob,position:eq},a=>a.position>=-1&&a.position<=2);Xob=Fo(Wob,a=>a.length>=2&&a.every((b,c,d)=>c===0||d[c-1].position<=b.position));Yob=Mo(Xob);Zob=Vo({values:{type:Eo("linear")},attributes:{Rb:Yob,rotation:__c.wob}});$ob=Vo({values:{type:Eo("radial")},attributes:{Rb:Yob,center:Mo(__c.Uob)}});__c.apb=lp({linear:Zob,radial:$ob},a=>a.type,a=>a.type);bpb=No(Lo(__c.apb));
__c.Dq=Vo({Ob:{image:Pob,video:Tob,gradient:bpb},attributes:{dropTarget:__c.Jmb,color:__c.yob,W:__c.vob,locked:jq,lC:jq,dO:__c.oq,Vo:__c.oq,flipX:jq,flipY:jq}});__c.Eq=Vo({Ob:{fill:__c.Dq},attributes:{weight:__c.mq,color:__c.yob,Ao:__c.Fob,ft:jq}});cpb=Go({top:eq,left:eq,height:fq,width:fq});__c.dpb=Mo(cpb);epb=Go({mf:Fo(cq)});__c.fpb=Mo(epb);gpb=Go({text:bq,user:bq,brand:bq});hpb=Go({text:bq,url:bq});var ipb,jpb,kpb,lpb,mpb,npb,opb,ppb;ipb=Go({type:Eo("google-sheets"),url:bq,W_a:Lo(dq),bG:bq,range:__c.gq});jpb={aMb:Io(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*|[A-Z]+[1-9]\d*:[A-Z]+[1-9]\d*)$/)};kpb=Go(jpb);lpb=Go({type:Eo("copy-sheets"),W_a:Lo(dq),Uf:bq,t7:bq,Se:Fo(kpb)});mpb=Go({...jpb});npb=Go({type:Eo("live-sheets"),W_a:Lo(dq),t7:bq,Se:Fo(mpb)});opb=Go({app:nob,source:bq,title:__c.gq});ppb=Go({type:Eo("app"),hSd:opb,W_a:Lo(dq)});
__c.qpb=__c.Ho({"google-sheets":ipb,"copy-sheets":lpb,"live-sheets":npb,app:ppb},a=>a.type);__c.rpb=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return a!=="false";default:throw Error();}}validate(a){ka(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.kYc(a)}kYc(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.x9c=c}};__c.op=Object.keys({vv:0})[0];
__c.Bkb=class{getScope(a){return this.attributes[a].scope}roa(a){if(typeof a==="function")return a;switch(a){case "all":return()=>!0;case "block":return this.Cre;case "inline":return this.lse;default:throw new r(a);}}copy(a,b,c){__c.pp(this,b,a,(d,e)=>c[e]=d)}m3(a){for(const [b,c]of Object.entries(a))ka(this.oD(b)),c!=null&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);b!=null&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return b!=null?a.normalize(b):void 0}encode(a,
b){return __c.np(this.attributes[a],b)}decode(a,b){return __c.mp(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.oNa=b;this.pTa=c;this.PYe=d;this.Ii=Xn(this.attributes,e=>e.defaultValue);this.Wwb={as:this.Ii,ss:Xn(this.Ii,(e,f)=>e!=null?this.encode(f,e):void 0)};this.oD=e=>e in this.attributes;this.Cre=e=>this.getScope(e)==="block";this.lse=e=>this.getScope(e)==="inline";this.wEb=e=>{e=rkb(e);return!(!e||!this.pTa.has(e))};this.ZIa=e=>typeof e!=="string"?!1:__c.tkb(this,e)!=null;
this.y9c=e=>{const f=this.PYe;return typeof e==="string"&&f.has(e)};this.xBa=(e,f,g)=>f===g?!0:f!=null&&g!=null?this.attributes[e].xBa(f,g):f==null&&g==null}};__c.Bkb.prototype.U0=ea(125);
var wkb=class extends __c.rpb{HQa(){return new wkb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}xBa(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);ka(Number.isInteger(b)&&b>=-2147483648);ka(Number.isInteger(c)&&c<=2147483647);ka(Number.isInteger(d));
ka(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.qkb(this)}},ykb=class extends __c.rpb{HQa(){return new ykb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}kYc(a){return a===0?a:Number(a.toPrecision(this.std))}xBa(a,b){return a===b}encode(a){return`${this.Rwa==="fixed"&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,std:d=6,Rwa:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);ka(Number.isFinite(b)&&b>=-Number.MAX_VALUE);ka(Number.isFinite(c)&&c<=Number.MAX_VALUE);ka(Number.isInteger(d)&&1<=d&&d<=15);this.min=b;this.max=c;this.units=g;this.std=d;this.Rwa=e;__c.qkb(this)}},zkb=class extends __c.rpb{isValid(a){return this.Aza.test(a)}HQa(){return new zkb(this.scope,this.Aza,this.defaultValue,!0)}xBa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.Aza=
b;__c.qkb(this)}},Akb=class extends __c.rpb{isValid(a){return this.uzd.has(a)}HQa(){return new Akb(this.scope,this.uzd,this.defaultValue,!0)}xBa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.uzd=new Set(b);__c.qkb(this)}};var wpb,xpb,ypb;__c.spb="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.tpb=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.upb=["normal","italic"];__c.vpb=["none","underline"];wpb=["start","center","end","justify"];
Fq=__c.Fq={fontFamily:tp("inline",__c.tpb,"YACgEZ1cb1Q,0"),fontSize:sp("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:up("inline",__c.spb),fontStyle:up("inline",__c.upb),RQ:tp("inline",__c.Ulb,"1"),verticalAlign:tp("inline",__c.Wlb,"0%"),color:tp("inline",__c.Rlb,"#000000"),backgroundColor:tp("inline",Slb,"transparent"),S8:sp("inline",{min:0,max:.2,units:"em"}),Q8:sp("inline",{min:0,max:.16,units:"em"}),Bn:up("inline",__c.vpb),qz:up("inline",["none","strikethrough"]),link:tp("inline",__c.Qlb,
""),letterSpacing:sp("inline",{min:-.2,max:.8,units:"em"}),lineHeight:sp("block",{min:.5,max:2.5,defaultValue:1.4}),direction:up("block",["ltr","rtl"]),textAlign:up("block",wpb),XA:up("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),yK:__c.xkb({min:0}),marginInlineStart:__c.xkb({min:0,max:200,units:"px"}),textIndent:__c.xkb({min:0,max:32,units:"px"}),e3a:tp("inline",/^$/,""),f3a:tp("inline",/^$/,""),Oob:tp("inline",/^$/,"")};
xpb={yEa:tp("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};ypb={...Xn(Fq,a=>a.HQa()),qB:up("inline",["add","delete"]).HQa()};__c.Gq=__c.Ckb({static:Fq,oTa:xpb,vv:ypb});__c.zpb=`${Object.keys({yEa:0})[0]}/`;__c.Apb=Object.keys({qB:0})[0];var Dpb=class{I7(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(vp(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Dkb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ka(b>=0,"{} < 0",b);b&&(this.I7(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){this.mode!==0&&this.I7();return this.ops?new Bpb(this.ops,this.pre,this.post):Cpb}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},Epb=class{static create(a,b,c,d=0,e=0){ka(d>=0,"{} < 0",d);ka(e>=0,"{} < 0",e);b=Math.max(0,d-b,e-c);return new Epb(b?[...a,vp(b)]:a)}get head(){return this.um}Iz(a){return this.WC(0,a).length}WC(a,b=1){const c=m(this.um);if(c.type!==a)throw Error();const d=c.length;ka(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.um=vp(d-b),vp(b);case 1:return this.um=Dkb(d-b),Dkb(b);default:throw new r(a);}else return this.um=this.ops[this.i++],c}finish(){ma(this.um==null)}constructor(a){this.ops=a;this.i=0;this.um=a[this.i++]}},Bpb=class{isEmpty(){return this.pre===0&&this.post===0&&this.ops.length===0}pd(a,b){return Epb.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},Cpb=new Bpb([],0,0),Fpb=class extends Up{Kg(){return new Dpb}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.Kg(),d=a.pd(0,b.pre),e=b.pd(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(g.type===1)c.append(e.WC(g.type,g.length));else if(f)if(f.type===1){var h=Math.min(f.length,g.length);d.WC(f.type,h);e.WC(g.type,h);c.append(Dkb(h))}else h=
Math.min(f.length,g.length),d.WC(f.type,h),e.WC(g.type,h),c.append(vp(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return no(b,a);const c=a.pd(b.pre,0),d=b.pd(a.pre,0),e=this.Kg(),f=this.Kg();for(var g=c.head,h=d.head;g||h;){if(g&&g.type===1)h=c.WC(g.type,g.length),f.append(vp(h.length)),e.append(h);else if(h&&h.type===1){var k=
d.WC(h.type,h.length);f.append(k);e.append(vp(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.WC(g.type,k),h=d.WC(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return no(f.build(),e.build())}fl(){return Cpb}ek(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.pd();b=b.pd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(d.type!==0||c.length!==d.length)return!1;
a.Iz(c.length);b.Iz(d.length);break;case 1:if(d.type!==1||c.length!==d.length)return!1;wp(a,c.length);wp(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return Cpb}apply(a){return a}Dl(a){return a}bi(a,b){return a===b}equals(a){return this===a||a instanceof Fpb}},Ekb=new Map,Ap=new Fpb;var Hpb,Jpb,Ipb,Gpb,Lpb,Hkb,Mpb,Npb;
Hpb=class extends Up{ah(){return new Hkb(this.FB)}pO(){return Gpb}Be(a={}){return{x:a.x||Ap.Kg().build(),y:a.y||Ap.Kg().build(),attrs:a.attrs||yp(this).build()}}isIdentity(a){return Ap.isIdentity(a.x)&&Ap.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=Ap.compose(a.x,b.x),d=Ap.compose(a.y,b.y);a=Lkb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.Be({x:c,y:d,attrs:a});const e=yp(this);Jkb(a,b.attrs,e,(f,g,h)=>{g?h?(ma(this.FB(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}CGa(a,b,c,d){return Ap.isIdentity(c)&&Ap.isIdentity(d)||b.items.isEmpty()?b:Kkb(a,this.FB,b,c,d)}transform(a,b){const c=mo.Ar(),{Lt:d,pu:e}=po(c,Ap.transform(a.x,b.x)),{Lt:f,pu:g}=po(c,Ap.transform(a.y,b.y));a=Lkb(this,a.attrs,d,f);b=Lkb(this,b.attrs,e,g);if(a.items.isEmpty()||b.items.isEmpty()){var h=this.Be({x:d,y:f,attrs:b});a=this.Be({x:e,y:g,attrs:a});return c.build(h,a)}var k=Math.max(a.rq,b.rq),l=Math.max(a.wA,b.wA);a=a.pd(void 0,k,l);k=b.pd(void 0,k,l);b=yp(this);
l=yp(this);for(var n=a.head,p=k.head;n||p;){if(n&&n.type===0||p&&p.type===0){n=a.kx();p=k.kx();const x=b.kx(),z=l.kx();for(var q=n.head,u=p.head;q||u;){if(q&&q.type===0||u&&u.type===0){q=n.Mv();u=p.Mv();for(h of Ikb(q,u)){q=h;u=n.attrs[h];var w=p.attrs[h];u&&w?(ma(this.FB(q,u.o,w.o)),q=oo({o:w.n,n:u.n})):q=no(w,u);const {Lt:B,pu:C}=po(c,q);x.Zm(h,C);z.Zm(h,B)}}else if(q&&u)q=Math.min(q.length,u.length),n.Wn(q),p.Wn(q),x.LB(q),z.LB(q);else if(q)q=q.length,n.Wn(q),x.LB(q),z.LB(q);else if(u)q=u.length,
p.Wn(q),x.LB(q),z.LB(q);else throw Error();q=n.head;u=p.head}n.finish();p.finish();x.finish();z.finish()}else if(n&&p)n=Math.min(n.length,p.length),zp(a,n),zp(k,n),b.rows(n),l.rows(n);else if(n)n=n.length,zp(a,n),b.rows(n),l.rows(n);else if(p)n=p.length,zp(k,n),b.rows(n),l.rows(n);else throw Error();n=a.head;p=k.head}a.finish();k.finish();h=this.Be({x:d,y:f,attrs:l.build()});a=this.Be({x:e,y:g,attrs:b.build()});return c.build(h,a)}fl(a){a=a.attrs.pd();const b=yp(this);for(var c=a.head;c;){if(c.type===
0){c=a.kx();const e=b.kx();for(var d=c.head;d;){if(d.type===0){d=c.Mv();for(const f of Dp(d))d=c.attrs[f],e.Zm(f,d&&{o:d.n,n:d.o})}else d=d.length,c.Wn(d),e.LB(d);d=c.head}c.finish();e.finish()}else c=c.length,zp(a,c),b.rows(c);c=a.head}return this.Be({attrs:b.build()})}ek(a,b){return Ap.ek(a.x,b.x)&&Ap.ek(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:Ap.Kg().build(),y:Ap.Kg().build(),attrs:yp(this).build()}}apply(a,b){a=this.CGa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=
this.ah();Jkb(a,b.attrs,c,(d,e,f)=>this.uSd(d,e,f));return c.build()}Dl(a,b){if(b.attrs.items.isEmpty())return this.CGa("unapply",a,b.x,b.y);const c=this.ah();Jkb(a,b.attrs,c,(d,e,f)=>this.b2e(d,e,f));return this.CGa("unapply",c.build(),b.x,b.y)}bi(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof Hpb?this.FB===a.FB:!1}constructor(a){super();this.FB=a;this.Zvd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.FB(b,c.o,d.o)&&this.FB(b,e,f)}return!c&&!d};this.uSd=(b,
c,d)=>d!=null?(ma(this.FB(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.b2e=(b,c,d)=>d!=null?(ma(this.FB(b,c,d.n)),d.o):c}};
Jpb=class{isEmpty(){return!this.items.length}pd(a){return new Ipb(this.items,this.length,a)}forEach(a,{grad:b,Gc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.pd();a=a.pd();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(e.type!==0)return!1;d=c.Mv();e=a.Mv();if(d!=null?e==null||
!b(d,e):e!=null)return!1;break;case 1:if(e.type!==1||d.length!==e.length)return!1;c.Wn(d.length);a.Wn(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.Kpb=new Jpb([],0);
Ipb=class{get head(){return this.um}Wn(a){var b=this.um;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.um=a<b?Mkb(b-a):this.input[this.i++];return a}Mv(){const a=this.um;if(a&&a.type!==1)return this.um=this.input[this.i++],a.value}finish(){ma(this.um==null,"stream not empty: {}",this.um)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,Mkb(c)]:a;this.um=this.input.length?this.input[this.i++]:void 0}};
Bp=__c.Bp=class{grad(a){if(a==null)return this;ma(this.Xoa==null,"nextGrad already set: {}",this.Xoa);this.Xoa=a;return this}Gc(a){if(a<=0)return this;this.Xoa!=null&&(this.Woa&&(this.items.push(Mkb(this.Woa)),this.Woa=0),this.items.push({type:0,value:this.Xoa}),this.Xoa=void 0);this.Woa+=a;this.W2+=a;return this}build(){this.Xoa!=null?(ma(this.Woa!==0),this.items.push(Mkb(this.Woa)),this.items.push({type:0,value:this.Xoa}),this.Woa=0,this.Xoa=void 0):this.W2-=this.Woa;return new Jpb(this.items,this.W2)}constructor(){this.items=
[];this.Woa=this.W2=0;this.Xoa=void 0}};
Cp=__c.Cp=class{static of(a,b,c,d){return b.isEmpty()?Gpb:new Cp(a,b,c,d)}pd(a=()=>!0,b=0,c=0){b=Math.max(this.rq,b);c=Math.max(this.wA,c);const d=this.items.pd(c);return new Lpb(this.FB,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.pd(a,c,d);c=a.head;let e=0;for(;c;)e=c.type!==0&&a.gBe?e+zp(a,c.length):e+a.W3b((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.kx;this.items.forEach(this.items.length,{Gc:a.rows,grad:c=>{const {LB:d,grad:e,Sab:f}=b();c.forEach(c.length,{Gc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof Cp&&this.wA===a.wA&&this.rq===a.rq?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>Rkb(this.FB,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",Gkb))}constructor(a,b,c,d){this.FB=a;this.items=b;this.rq=c;this.wA=d}};Gpb=new Cp((a,b,c)=>b===c,__c.Kpb,0,0);
Lpb=class{get head(){return this.nTa.head}W3b(a){ma(this.gW==null);const b=this.kx();var c=b.head;let d=0;for(;c;){if(c.type===0)b.Mv();else{c=b.Wn(c.length);if(!Ep(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?zp(this,1):0}get gBe(){ma(this.head!=null);ma(this.gW==null);return this.head.type===1&&this.fB.isEmpty()}kx(){ma(this.gW==null);var a=this.nTa.Mv();if(a){a=a.pd(this.rq);for(var b=this.fB.pd(this.rq),c=new Bp,d=a.head,e=b.head;d||e;){if(d&&
d.type===0||e&&e.type===0){const g=a.Mv(),h=b.Mv();b:{d=this.CEa;e=this.roa;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];ka(Nkb(d,f,h===null||h===void 0?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=Ep(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.Wn(d),b.Wn(d),c.Gc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.fB;this.gW=f;return new Mpb(this.CEa,this.roa,this.gW.pd(this.rq),this.Loc)}finish(){ma(this.gW==
null);this.nTa.finish()}constructor(a,b,c,d,e){this.CEa=a;this.nTa=b;this.roa=c;this.rq=d;this.wA=e;this.fB=__c.Kpb;this.gW=void 0;this.Loc=()=>{ma(this.gW!=null);this.fB=this.gW;this.gW=void 0}}};
Hkb=class{kx(){ma(this.Bnb==null);return this.Bnb=new Npb(this.FB,this.y_d)}rows(a){this.p7b.Gc(a);return this}build(){ma(this.Bnb==null);ma(this.fB.isEmpty(),"prevDxs not empty: {}",this.fB);const a=this.p7b.build();return Cp.of(this.FB,a,this.rq,a.length)}constructor(a){this.FB=a;this.p7b=new Bp;this.rq=0;this.fB=__c.Kpb;this.Bnb=void 0;this.y_d=b=>{ma(this.Bnb!=null);this.rq=Math.max(this.rq,b.length);var c=this.fB.pd(this.rq);const d=b.pd(this.rq),e=new Bp;for(var f=c.head,g=d.head;f||g;){if(f&&
f.type===0||g&&g.type===0)f=c.Mv(),g=d.Mv(),f=__c.Qkb(this.FB,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.Wn(f),d.Wn(f),e.Gc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.p7b.grad(c);this.fB=b;this.Bnb=void 0}}};
Mpb=class{get attrs(){return this.sI}get head(){return this.Yxb.head}Wn(a){return this.Yxb.Wn(a)}Mv(){const a=this.Yxb.Mv();this.Hka(a);return a}finish(){this.Yxb.finish();this.Jn()}Hka(a){if(a)for(const b in a){if(!this.roa(b))continue;const c=__c.Okb(this.CEa,b,this.sI[b],a[b]);c==null?delete this.sI[b]:this.sI[b]=c}}constructor(a,b,c,d){this.CEa=a;this.roa=b;this.Yxb=c;this.Jn=d;this.sI={}}};
Npb=class{Zm(a,b){var c=this.CEa,d=this.sI[a];(b=c(a,d,b)?void 0:{ac:d,r:b})?(this.vJ||(this.vJ={}),this.vJ[a]=b):this.vJ&&(delete this.vJ[a],Ep(this.vJ)&&(this.vJ=void 0));return this}attrs(a){for(const b of Dp(a))this.Zm(b,a[b]);return this}LB(a){if(a<=0)return this;this.Hka();this.Tua.Gc(a);return this}Hka(){if(this.vJ){var a=this.vJ;this.vJ=void 0;for(const b in a){const c=__c.Okb(this.CEa,b,this.sI[b],a[b]);c==null?delete this.sI[b]:this.sI[b]=c}this.Tua.grad(a)}}finish(){this.Hka();ma(Ep(this.sI));
const a=this.Tua.build();this.Jn(a)}constructor(a,b){this.CEa=a;this.Jn=b;this.sI={};this.vJ=void 0;this.Tua=new Bp}};var Opb=class extends Zp{get rq(){return this.grid.rq}get wA(){return this.grid.wA}set(a,b,c){const {dXe:d,RWe:e,hzb:f=d,ede:g=e}=b,h=__c.rp(this.hh,__c.qp(this.hh,a,c)),k=__c.vkb(this.hh,h,(n,p)=>__c.ukb(this.hh,h,p));b=Xn(k,()=>{});c=yp(this.domain);c.rows(d);for(var l=d;l<=f;l++){const n=c.kx();n.LB(e);for(let p=e;p<=g;p++){const q=this.grid.get(l,p),u={};__c.pp(this.hh,k,a,(w,x)=>{u[x]={o:q&&q[x],n:k[x]}});n.attrs(u);n.LB(1)}n.attrs(b);n.finish();c.rows(1)}a=c.kx();a.LB(e);for(l=e;l<=g;l++)a.attrs(b),
a.LB(1);a.attrs(b);a.finish();a=this.domain.Be({attrs:c.build()});this.Rq(a)}write(a,b,c){c==null||Object.keys(c).length===0?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(b!=null&&(a=__c.qp(this.hh,a,b),Object.keys(a).length!==0))return a}yT(){const a=this.domain.ah();for(let b=0;b<=this.wA;b++){const c=a.kx();let d={};for(let e=0;e<=this.rq;e++){const f=this.grid.get(b,e);for(const g of Ukb(d,f))c.Zm(g,f&&f[g]);d=f;c.LB(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=
this.cc();ma(this.domain.bi(b,a))}Wi(a){const b=this.cc(),c=yp(this.domain);Jkb(b,a,c,(d,e,f)=>e==null&&f==null?void 0:{o:e,n:f});this.Rq(this.domain.Be({attrs:c.build()}));return!0}DZ(a){this.F_b(a.x);this.G_b(a.y);Tkb(this,a.attrs)}F_b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.pd();for(var c=a.head;c;)c.type===0?b+=a.Iz(c.length):(c=wp(a,c.length),bjb(this.grid,b,c),b+=c),c=a.head}}G_b(a){let b=0;a=a.pd();for(var c=a.head;c;)c.type===0?b+=a.Iz(c.length):(c=wp(a,c.length),cjb(this.grid,b,c),b+=c),
c=a.head}constructor(a,b,c){super();this.hh=a;this.domain=b;this.grid=new qmb;c.forEach(a.oD,(d,e,f)=>{Object.keys(f).length===0||this.grid.set(d,e,f)});ma(this.domain.bi(c,this.yT()))}},Ppb=class extends omb{ah(){return this.domain.ah()}Lz(a){return new Opb(this.hh,this.domain,a)}Ym(a){return a}connect(a,b){return this.Ym(a).connect(b)}cc(a){return this.Ym(a).cc()}destroy(a,b){this.Ym(a).destroy(b)}Wi(a,b){return this.Ym(a).Wi(b)}constructor(){var a=__c.Hq;super();this.hh=a;this.domain=new Hpb(a.xBa)}};__c.Rpb=class{get rq(){return this.grid.rq}get wA(){return this.grid.wA}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,Fp(b,c,d.right,d.bottom))})}map(a){const b=new Qpb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(c!=null&&(c=c.cells[a],c!=null))return __c.Vkb(Fp(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.Vkb(c,b))});return a}pd(){return this.grid.pd()}constructor(a){this.grid=
a}};__c.Rpb.prototype.wgc=ea(126);
var Qpb=class{add(a,b){flb(this.$Zd,a);this.ipd.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.ipd.build();return a.isEmpty?Spb:new __c.Rpb(a)}constructor(){this.ipd=new Tpb;this.$Zd=new Upb}},Vpb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},Wpb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Hp=class{add(a,b,c){if(c==
null)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=Fp(a,b,c.bounds.o.right,c.bounds.o.bottom);flb(this.Bfd,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=Fp(a,b,c.bounds.n.right,c.bounds.n.bottom),flb(this.Sed,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.VVa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=Fp(a,b,c.o.right,c.o.bottom),flb(this.Bfd,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=Fp(a,b,c.n.right,c.n.bottom),flb(this.Sed,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.VVa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.VVa.build()}constructor(){this.VVa=new Tpb;this.Bfd=new Upb;this.Sed=new Upb}},Ypb=class{get isEmpty(){return this.rows.length===0}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}pd(){return new Xpb(this.rows)}constructor(a,b,c){this.rows=
a;this.rq=b;this.wA=c}},Xpb=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}Nt(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;Wkb(this);b.cells[this.x]==null&&(this.y++,this.x=0,Xkb(this),Wkb(this));return a}finish(){ma(this.head==null)}constructor(a){this.rows=a;this.x=this.y=0;Xkb(this);Wkb(this)}},Tpb=class{add(a,b,c,d,e){ka(a<=c);ka(b<=d);this.D6==null||this.D6.y<b?(this.flush(),this.rows.length&&ma(this.rows.length<=b),this.D6=
{y:b,rkc:d,cells:[]},this.D6.cells[a]=e):this.D6.y===b?(ma(this.D6.cells.length<=a),this.D6.rkc=Math.max(this.D6.rkc,d),this.D6.cells[a]=e):ma(this.D6.y>b);this.rq=Math.max(this.rq,c+1);this.wA=Math.max(this.wA,d+1);return this}flush(){if(this.D6){const {y:a,...b}=this.D6;this.rows[a]=b;this.D6=void 0}}build(){this.flush();return new Ypb(this.rows,this.rq,this.wA)}constructor(){this.rows=[];this.wA=this.rq=0}},Spb=new __c.Rpb(new Ypb([],0,0)),Zpb=class extends Up{ah(){return new Qpb}pO(){return Spb}replace(a,
b){return new Vpb(a,b)}update(a,b){a=a==null||Gp(a.o,a.n)?void 0:a;b=b==null||this.component.isIdentity(b)?void 0:b;return a!=null||b!=null?new Wpb(a,b):void 0}Be(a={}){const b=a.cells||(new Hp).build();return{x:a.x||Ap.Kg().build(),y:a.y||Ap.Kg().build(),cells:b,S_:a.S_||Iq.project(b)}}isIdentity(a){return Ap.isIdentity(a.x)&&Ap.isIdentity(a.y)&&a.cells.isEmpty&&Iq.isIdentity(a.S_)}compose(a,b){const c=Ykb(this,a.cells,b.x,b.y),d=Iq.expand(a.S_,b.x,b.y);return{x:Ap.compose(a.x,b.x),y:Ap.compose(a.y,
b.y),cells:alb(this,c,b.cells),S_:Iq.compose(d,b.S_)}}transform(a,b){const c=mo.Ar(),{Lt:d,pu:e}=po(c,Ap.transform(a.x,b.x)),{Lt:f,pu:g}=po(c,Ap.transform(a.y,b.y)),h=Ykb(this,a.cells,d,f),k=Ykb(this,b.cells,e,g);a=Iq.expand(a.S_,d,f);b=Iq.expand(b.S_,e,g);const {Lt:l,pu:n}=po(c,Iq.transform(a,b)),p=new Upb,q=Iq.cursor(a,Math.max(h.rq,k.rq),Math.max(h.wA,k.wA)),u=new Hp,w=new Hp;Zkb(h.pd(),k.pd(),(x,z,B,C)=>{if(B!=null||C!=null){a:if(B==null||C==null)var E=no(C,B);else switch(B.type){case 1:b:{switch(C.type){case 1:E=
mo.Ar();const {Lt:M,pu:N}=B.delta&&C.delta?po(E,this.component.transform(B.delta,C.delta)):no(C.delta,B.delta);if(B.bounds&&C.bounds){B=B.bounds;C=C.bounds;ma(Gp(B.o,C.o));const V={right:Math.min(B.n.right,C.n.right),bottom:Math.min(B.n.bottom,C.n.bottom)},aa=mo.Ar();qib(aa,!Gp(C.n,V));rib(aa,!Gp(B.n,V));B=aa.build({o:C.n,n:V},{o:B.n,n:V});B=po(E,B)}else B=no(C.bounds,B.bounds);const {Lt:U,pu:S}=B;E=E.build(this.update(U,M),this.update(S,N));break b;case 0:ma(C.o!=null);B.bounds&&ma(Gp(B.bounds.o,
C.o));E=new mo(this.replace({...(B.bounds?B.bounds.n:C.o),state:B.delta?this.component.apply(C.o.state,B.delta):C.o.state},C.n),void 0,!1,!0);break b;default:throw new r(C);}E=void 0}break a;case 0:b:switch(C.type){case 1:ma(B.o!=null);C.bounds&&ma(Gp(B.o,C.bounds.o));E=oo(this.replace({...(C.bounds?C.bounds.n:B.o),state:C.delta?this.component.apply(B.o.state,C.delta):B.o.state},B.n));break b;case 0:ma(Ip(this,B.o,C.o));E=oo(this.replace(C.n,B.n));break b;default:throw new r(C);}break a;default:throw new r(B);
}var {Lt:H,pu:I}=po(c,E);H&&(E=dlb(this,x,z,H,p,q))&&(H=$kb(this,H,E),I=$kb(this,I,E),qib(c));H&&w.add(x,z,H);I&&u.add(x,z,I)}});q.finish();return c.build({x:d,y:f,cells:w.build(),S_:l},{x:e,y:g,cells:u.build(),S_:n})}fl(a){const b=new Hp;a.cells.forEach((d,e,f)=>{if(f!=null)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.fl(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:Ap.fl(a.x),
y:Ap.fl(a.y),cells:c,S_:Iq.project(c)}}ek(a,b){var c;if(c=Ap.ek(a.x,b.x)&&Ap.ek(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.rq!==d.rq||c.wA!==d.wA)c=!1;else{c=c.pd();d=d.pd();for(var e=c.head,f=d.head;e||f;){var g;(g=e==null)||(g=f==null)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(e==null||f==null?e===f:e.type===0&&f.type===0?Ip(this,e.o,f.o)&&Ip(this,e.n,f.n):e.type===1&&f.type===1&&(e.bounds&&f.bounds?Gp(e.bounds.o,f.bounds.o)&&Gp(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&
f.delta?this.component.ek(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.Nt();d.Nt();e=c.head;f=d.head}c=!0}}return c&&Iq.ek(a.S_,b.S_)}identity(){return this.Be()}apply(a,b){a=this.CGa(a,b.x,b.y);const c=this.ah();Zkb(a.pd(),b.cells.pd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ma(f!=null),c.add(Fp(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ma(f!=null);g.bounds&&ma(Gp(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,
g.delta):f.state);break;case 0:g.o&&(ma(f!=null),ma(Ip(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}CGa(a,b,c){if(Ap.isIdentity(b)&&Ap.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=xp(b,d),g=xp(c,e),h=new Qpb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};
h.add(l,k)});return h.build()}Dl(a,b){const c=this.ah();Zkb(a.pd(),b.cells.pd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ma(f!=null),c.add(Fp(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ma(f!=null);g.bounds&&ma(Gp(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Dl(f.state,g.delta):f.state);break;case 0:g.n&&(ma(f!=null),ma(Ip(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.bSb(c.build(),
b.x,b.y)}bSb(a,b,c){if(Ap.isIdentity(b)&&Ap.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Fkb(b,d),g=Fkb(c,e),h=new Qpb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}bi(a,b){if(a===b)return!0;a=a.pd();b=b.pd();let c=a.head,d=b.head;for(;c||d;){if(c==null||d==null||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||
c.value.right!==d.value.right||!this.component.bi(c.value.state,d.value.state))return!1;a.Nt();b.Nt();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof Zpb&&this.component.equals(a.component)}constructor(a){super();this.component=a}},Upb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){ma(!this.readBuffer(c,b));const {xAd:d,BAd:e}=glb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {xAd:c,BAd:d}=glb(this,a,
b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.zsa=this.kda=0}},$pb=class extends Up{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.G6a.ah();Jkb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return no(b,a)}fl(a){return a}ek(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Dl(a){return a}bi(a,b){return a===b}equals(a){return this===a||a instanceof $pb}Kg(){return new aqb(()=>
this.G6a.ah(),a=>oib(this,a))}cursor(a,b,c){return new bqb(a,b,c)}project(a){const b=this.Kg();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(Fp(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(Fp(c,d,e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.G6a.Be({x:hlb(b),y:hlb(c)});return this.G6a.apply(a,b)}constructor(){super();this.G6a=new Hpb((a,b,c)=>b===c);this.id=this.G6a.ah().build()}},aqb=class{add(a){const b=this.VVa(),c=
a.left*2,d=a.top*2,e=a.right*2;a=a.bottom*2;b.rows(d);b.kx().LB(c).attrs({value:!0}).LB(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.kx().LB(c).attrs({value:void 0}).LB(e-c+1).attrs({value:void 0}).finish();this.RT.push(b.build());return this}build(){return this.RT.length?this.reduce(this.RT):this.VVa().build()}constructor(a,b){this.VVa=a;this.reduce=b;this.RT=[]}},bqb=class{get yi(){ma(this.kka%2===0);return this.kka/2}kx(){ma(this.UCa===0);this.mS=this.pd.kx();return this}get value(){ma(this.mS!=
null);return this.mS.attrs.value}W3b(a){ma(this.mS!=null);for(var b=this.mS.head;b!=null;){if(b.type===0)this.mS.Mv();else if(b=this.mS.Wn(b.length),this.kka%2===0&&this.mS.attrs.value)for(let c=0;c<b;c++)this.UCa%2===0&&a(this.UCa/2,this.kka/2),this.UCa++;else this.UCa+=b;b=this.mS.head}return this}Sab(){for(ma(this.mS!=null);this.mS.head;)this.mS.head.type===0?this.mS.Mv():this.mS.Wn(this.mS.head.length);this.mS.finish();this.mS=void 0;this.UCa=0;return this}finish(){blb(this,this.pd.wA);this.pd.head&&
(this.kx(),this.Sab());this.pd.finish()}constructor(a,b,c){this.UCa=this.kka=0;this.pd=a.pd(void 0,b*2,c*2)}},Iq=new $pb;var eqb=class extends Zp{get(a,b){a=this.grid.get(a,b);if(a!=null)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.IIa.left===d&&b.IIa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Hp).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.Rq(this.domain.compose(ilb(this,a),this.domain.Be({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.Rq(ilb(this,a))}createRef(a,b){var c=this.grid;var d={left:ajb(this.grid,b.left),top:$ib(this.grid,
b.top),right:ajb(this.grid,b.right),bottom:$ib(this.grid,b.bottom)};c=new cqb(c,d);d=Ao(this,jlb(this,c));const {mutable:e,Zw:f}=Bo(this.type,a,d);a=new dqb(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}p6b(a,b,c){ma(a.span.left===c.left);ma(a.span.top===c.top);ma(a.span.right===c.right);ma(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)ma(this.grid.get(d,e)===a),this.grid.delete(d,e);Co(this.type,b,a.to,a.value)}DZ(a){this.F_b(a.x);
this.G_b(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){ma(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;ma(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)ma(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=f;g++)ma(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.IIa.right=ajb(this.grid,d);e.IIa.bottom=$ib(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),ma(e.span.left===b&&e.span.top===c),ma(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.p6b(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)ma(this.grid.get(e,h)==null),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)ma(this.grid.get(f,b)==null),this.grid.set(f,b,g);g.IIa.right=ajb(this.grid,d.right);g.IIa.bottom=$ib(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}F_b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.pd();for(var c=a.head;c;)c.type===0?b+=a.Iz(c.length):
(c=wp(a,c.length),bjb(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}G_b(a){let b=0;a=a.pd();for(var c=a.head;c;)c.type===0?b+=a.Iz(c.length):(c=wp(a,c.length),cjb(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}yT(){const a=this.domain.ah();for(let b=0;b<this.grid.wA;b++)for(let c=0;c<this.grid.rq;c++){const d=this.grid.get(b,c);d!=null&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.cc(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.wA;d++)for(let e=
0;e<this.grid.rq;e++){const f=this.grid.get(d,e);if(f==null||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));ma(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}ma(c===b)}Wi(a){const b=new Hp,c=new Hp;for(let d=0;d<this.grid.wA;d++)for(let e=0;e<this.grid.rq;e++){const f=this.grid.get(d,e);f!=null&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.cc(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.Rq(this.domain.compose(this.domain.Be({cells:b.build()}),this.domain.Be({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new qmb;c.forEach((d,e)=>{this.createRef(d,e)})}},dqb=class{get span(){return this.IIa.hid.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.IIa=d}},cqb=class{get right(){return this.KLc.get()}set right(a){this.KLc.set(a)}get bottom(){return this.rLc.get()}set bottom(a){this.rLc.set(a)}constructor(a,
b){this.eDb=a;this.hid=Ro(()=>({left:m(this.eDb.n3b.get(this.left)),top:m(this.eDb.fvc.get(this.top)),right:m(this.eDb.n3b.get(this.right)),bottom:m(this.eDb.fvc.get(this.bottom))}),{equals:__c.Hlb.structural});this.left=b.left;this.top=b.top;this.KLc=new $p(b.right);this.rLc=new $p(b.bottom)}},fqb=class extends Yp{Lz(a){return new eqb(this.type,this.domain,a)}Ym(a){return a}connect(a,b){return this.Ym(a).connect(b)}cc(a){return this.Ym(a).cc()}destroy(a,b){return this.Ym(a).destroy(b)}Wi(a,b){return this.Ym(a).Wi(b)}constructor(a){super(Vp,
Vp);this.type=a;this.domain=new Zpb(this.type.domain)}};var gqb,hqb,Jp,klb,Jq,iqb,jqb,kqb;gqb=new Map;hqb=class{ordinal(a,b){b!=null?this.z5a.set(a,b):this.z5a.delete(a);return this}jk(a){a.forEach((b,c)=>this.z5a.set(c,b));return this}build(){return this.z5a.size?this.z5a:gqb}constructor(){this.z5a=new Map}};Jp=class{toString(){var a,b;return`R(${(a=this.oldValue)!==null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
klb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Jq=class{static create(a,b){const c=Ap.isIdentity(a),d=b.size===0;return c&&d?iqb:new Jq(c?iqb.axis:a,d?iqb.jk:b)}toString(){const a=[...this.jk].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.jk=b}};iqb=new Jq(Ap.Kg().build(),new Map);
jqb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Jq.create(this.axis.build(),this.jk)}constructor(){this.jk=new Map;this.axis=Ap.Kg()}};
kqb=class extends Up{ah(){return new hqb}Kg(){return new jqb}replace(a,b,c){return Kp(this.Kg(),a,b,c).build()}update(a,b,c){return llb(this.Kg(),a,b,c).build()}Be(a,b){return Jq.create(a,b)}isIdentity(a){return Ap.isIdentity(a.axis)&&!a.jk.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=nlb(a.jk,b.axis),d=new Map;for(const h of mlb(c,b.jk)){var e=c.get(h);const k=b.jk.get(h);if(e&&k){var f=d,g=f.set;a:{oa(e.newValue,k.oldValue);switch(e.type){case 0:e=new Jp(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new Jp(e.oldValue,k.newValue);break a;case 1:e=new klb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}e=void 0}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Jq.create(Ap.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return no(b,a);const c=mo.Ar(),{Lt:d,pu:e}=po(c,Ap.transform(a.axis,b.axis));a=nlb(a.jk,d);const f=nlb(b.jk,e);b=new Map;const g=new Map;for(var h of mlb(a,f)){var k=
a.get(h);const l=f.get(h);if(k&&l){a:{oa(k.oldValue,l.oldValue);switch(k.type){case 0:k=oo(new Jp(l.newValue,k.newValue));break a;case 1:switch(l.type){case 0:k=new mo(new Jp(k.newValue,l.newValue),void 0,!1,!0);break a;case 1:k=oo(new klb(l.newValue,k.newValue));break a;default:throw new r(l);}default:throw new r(k);}k=void 0}const {Lt:n,pu:p}=po(c,k);p&&b.set(h,p);n&&g.set(h,n)}else k?b.set(h,k):l&&g.set(h,l)}h=Jq.create(d,g);a=Jq.create(e,b);return c.build(h,a)}fl(a){const b=a.jk.size===0?a.jk:
Ng(a.jk,c=>{switch(c.type){case 0:return new Jp(c.newValue,c.oldValue);case 1:return new klb(c.newValue,c.oldValue);default:throw new r(c);}});return Jq.create(Ap.fl(a.axis),b)}ek(a,b){if(a===b)return!0;if(!Ap.ek(a.axis,b.axis)||a.jk.size!==b.jk.size)return!1;for(const e of a.jk.keys()){var c=a.jk.get(e),d=b.jk.get(e);if(c!==d&&(c==null||d==null||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return iqb}apply(a,b){if(this.isIdentity(b)||!a.size&&!b.jk.size)return a;
a=this.CGa(a,b.axis);if(!b.jk.size)return a;const c=new Map(a);for(const [d,e]of b.jk)b=a.get(d),oa(b,e.oldValue),e.newValue!=null?c.set(d,e.newValue):c.delete(d);return c}CGa(a,b){if(Ap.isIdentity(b))return a;const c=new Set(a.values()),d=xp(b,c);return Ng(a,e=>m(d.get(e)))}Dl(a,b){if(this.isIdentity(b)||!a.size&&!b.jk.size)return a;if(!b.jk.size)return this.bSb(a,b.axis);const c=new Map(a);for(const [d,e]of b.jk){const f=a.get(d);oa(f,e.newValue);e.oldValue!=null?c.set(d,e.oldValue):c.delete(d)}return this.bSb(c,
b.axis)}bSb(a,b){if(Ap.isIdentity(b))return a;const c=new Set(a.values()),d=Fkb(b,c);return Ng(a,e=>m(d.get(e)))}bi(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof kqb}constructor(){super();this.pO=gqb}};Np=__c.Np=new kqb;var lqb=new Map,Mp=class{static from(a){if(a instanceof Mp)return a;if(Array.isArray(a)){const [b,c]=a;return new Mp(b,c)}return new Mp(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},mqb=class{range(a,b){b?this.B8.set(a,Mp.from(b)):this.B8.delete(a);return this}Se(a){a.forEach((b,c)=>this.B8.set(c,Mp.from(b)));return this}build(){return this.B8.size?this.B8:lqb}constructor(){this.B8=new Map}},slb=class{toString(){var a,b;return`R(${(a=this.oldValue)!==
null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},Op=class{static from(a){if(a instanceof Op)return a;if(Array.isArray(a)){const [b,c]=a;return new Op(b,c)}return new Op(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},tlb=class{toString(){var a,b;return`U(${(a=this.start)!==null&&a!==void 0?a:"_"},${(b=this.end)!==null&&b!==void 0?
b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},ulb=class{static create(a,b){const c=Ap.isIdentity(a),d=b.size===0;return c&&d?nqb:new ulb(c?nqb.axis:a,d?nqb.Se:b)}toString(){return`{${this.axis}|${[...this.Se].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.Se=b}},nqb=new ulb(Ap.Kg().build(),new Map),oqb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}j0a(a,b,c){this.Se.set(a,new slb(b&&Mp.from(b),c&&Mp.from(c)));
return this}createRange(a,b){return this.j0a(a,void 0,b)}build(){return ulb.create(this.axis.build(),this.Se)}constructor(){this.Se=new Map;this.axis=Ap.Kg()}},Kq,pqb;ma(!0);Kq=Np.map(vlb,rlb,qlb,plb);
pqb=class extends Up{ah(){return new mqb}Kg(){return new oqb}replace(a,b,c){return this.Kg().j0a(a,b,c).build()}update(a,b,c){var d=this.Kg();d.Se.set(a,new tlb(b&&Op.from(b),c&&Op.from(c)));return d.build()}Be(a,b){return ulb.create(a,b)}isIdentity(a){return Kq.isIdentity(a)}compose(a,b){return Kq.compose(a,b)}transform(a,b){return Kq.transform(a,b)}fl(a){return Kq.fl(a)}ek(a,b){return Kq.ek(a,b)}identity(a){return Kq.identity(a)}apply(a,b){return Kq.apply(a,b)}Dl(a,b){return Kq.Dl(a,b)}bi(a,b){return Kq.bi(a,
b)}equals(a){return Kq.equals(a)}constructor(){super();this.pO=lqb}};Lq=__c.Lq=new pqb;var qqb=class extends Up{Be(a){return{rows:a.rows||this.rows.Kg().build(),cols:a.cols||this.cols.Kg().build(),qo:a.qo||Lq.Kg().build().Se,po:a.po||Np.Kg().build().jk,Un:a.Un||Lq.Kg().build().Se,yn:a.yn||Np.Kg().build().jk,cells:a.cells||Qp(this.cells.Be({}),this.cols.Kg().build(),this.rows.Kg().build()),attrs:a.attrs||Qp(this.attrs.Be({}),this.cols.Kg().build(),this.rows.Kg().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&a.qo.size===0&&a.po.size===0&&a.Un.size===
0&&a.yn.size===0&&a.cells.cells.isEmpty&&Iq.isIdentity(a.cells.S_)&&a.attrs.attrs.items.isEmpty()}compose(a,b){const c=Pp(a.cols),d=Pp(a.rows),e=Pp(b.cols),f=Pp(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=Lq.compose(Lq.Be(d,a.qo),Lq.Be(f,b.qo)).Se,l=Np.compose(Np.Be(d,a.po),Np.Be(f,b.po)).jk,n=Lq.compose(Lq.Be(c,a.Un),Lq.Be(e,b.Un)).Se,p=Np.compose(Np.Be(c,a.yn),Np.Be(e,b.yn)).jk,q=this.cells.compose(this.cells.Be({...a.cells,x:c,y:d}),this.cells.Be({...b.cells,
x:e,y:f}));a=this.attrs.compose(this.attrs.Be({...a.attrs,x:c,y:d}),this.attrs.Be({...b.attrs,x:e,y:f}));return{rows:g,cols:h,qo:k,po:l,Un:n,yn:p,cells:Qp(q,h,g),attrs:Qp(a,h,g)}}transform(a,b){const c=Pp(a.cols),d=Pp(a.rows),e=Pp(b.cols),f=Pp(b.rows),g=mo.Ar(),{Lt:h,pu:k}=po(g,this.rows.transform(a.rows,b.rows)),{Lt:l,pu:n}=po(g,this.cols.transform(a.cols,b.cols)),{Lt:{Se:p},pu:{Se:q}}=po(g,Lq.transform(Lq.Be(d,a.qo),Lq.Be(f,b.qo))),{Lt:{jk:u},pu:{jk:w}}=po(g,Np.transform(Np.Be(d,a.po),Np.Be(f,b.po))),
{Lt:{Se:x},pu:{Se:z}}=po(g,Lq.transform(Lq.Be(c,a.Un),Lq.Be(e,b.Un))),{Lt:{jk:B},pu:{jk:C}}=po(g,Np.transform(Np.Be(c,a.yn),Np.Be(e,b.yn))),{Lt:E,pu:H}=po(g,this.cells.transform(this.cells.Be({...a.cells,x:c,y:d}),this.cells.Be({...b.cells,x:e,y:f}))),{Lt:I,pu:M}=po(g,this.attrs.transform(this.attrs.Be({...a.attrs,x:c,y:d}),this.attrs.Be({...b.attrs,x:e,y:f})));a={rows:h,cols:l,qo:p,po:u,Un:x,yn:B,cells:Qp(E,l,h),attrs:Qp(I,l,h)};b={rows:k,cols:n,qo:q,po:w,Un:z,yn:C,cells:Qp(H,n,k),attrs:Qp(M,n,k)};
return g.build(a,b)}fl(a){const b=Pp(a.cols),c=Pp(a.rows),d=this.rows.fl(a.rows),e=this.cols.fl(a.cols),f=Lq.fl(Lq.Be(c,a.qo)).Se,g=Np.fl(Np.Be(c,a.po)).jk,h=Lq.fl(Lq.Be(b,a.Un)).Se,k=Np.fl(Np.Be(b,a.yn)).jk,l=this.cells.fl({...a.cells,x:b,y:c});a=this.attrs.fl(this.attrs.Be({...a.attrs,x:b,y:c}));return{rows:d,cols:e,qo:f,po:g,Un:h,yn:k,cells:Qp(l,e,d),attrs:Qp(a,e,d)}}ek(a,b){return this.rows.ek(a.rows,b.rows)&&this.cols.ek(a.cols,b.cols)&&Lq.ek(Lq.Be(Ap.identity(),a.qo),Lq.Be(Ap.identity(),b.qo))&&
Np.ek(Np.Be(Ap.identity(),a.po),Np.Be(Ap.identity(),b.po))&&Lq.ek(Lq.Be(Ap.identity(),a.Un),Lq.Be(Ap.identity(),b.Un))&&Np.ek(Np.Be(Ap.identity(),a.yn),Np.Be(Ap.identity(),b.yn))&&this.cells.ek(this.cells.Be(a.cells),this.cells.Be(b.cells))&&this.attrs.ek(this.attrs.Be(a.attrs),this.attrs.Be(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),qo:Lq.identity(a.qo).Se,po:Np.identity(a.po).jk,Un:Lq.identity(a.Un).Se,yn:Np.identity(a.yn).jk,cells:this.cells.identity(a.cells),
attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=Pp(b.cols),d=Pp(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=Lq.apply(a.qo,Lq.Be(d,b.qo)),h=Np.apply(a.po,Np.Be(d,b.po)),k=Lq.apply(a.Un,Lq.Be(c,b.Un)),l=Np.apply(a.yn,Np.Be(c,b.yn)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.Be({...b.attrs,x:c,y:d}));return{rows:e,cols:f,qo:g,po:h,Un:k,yn:l,cells:n,attrs:a}}Dl(a,b){if(this.isIdentity(b))return a;
const c=Pp(b.cols),d=Pp(b.rows),e=this.rows.Dl(a.rows,b.rows),f=this.cols.Dl(a.cols,b.cols),g=Lq.Dl(a.qo,Lq.Be(d,b.qo)),h=Np.Dl(a.po,Np.Be(d,b.po)),k=Lq.Dl(a.Un,Lq.Be(c,b.Un)),l=Np.Dl(a.yn,Np.Be(c,b.yn)),n=this.cells.Dl(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Dl(a.attrs,this.attrs.Be({...b.attrs,x:c,y:d}));return{rows:e,cols:f,qo:g,po:h,Un:k,yn:l,cells:n,attrs:a}}bi(a,b){return a===b?!0:this.rows.bi(a.rows,b.rows)&&Lq.bi(a.qo,b.qo)&&Np.bi(a.po,b.po)&&Lq.bi(a.Un,b.Un)&&Np.bi(a.yn,b.yn)&&this.cols.bi(a.cols,
b.cols)&&this.cells.bi(a.cells,b.cells)&&this.attrs.bi(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof qqb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var rqb=class extends Zp{static F(a){O(a,{Q9c:Ro})}get Q9c(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return Rp(this,this.refs.get(a))}forEach(a){for(const [b,c]of this.refs)a(Rp(this,c),b)}create(a,b){a=this.domain.replace(a,this.get(a),b);this.Rq(a)}update(a,b){const c=m(Rp(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.Rq(a)}delete(a){const b=Rp(this,this.refs.get(a));b!=null&&(a=this.domain.replace(a,b,void 0),this.Rq(a))}yT(){const a=this.domain.ah();for(const [b,
c]of this.refs)a.ordinal(b,Rp(this,c));return a.build()}destroy(a){ma(this.refs.size===a.size);for(const [b,c]of this.refs)ma(a.has(b)),ma(Rp(this,c)===a.get(b))}Wi(a){const b=this.domain.Kg();for(const [c,d]of this.refs){const e=Rp(this,d),f=a.get(c);Kp(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||Kp(b,c,void 0,d);this.Rq(b.build());return!0}DZ(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.pd();for(var d=b.head;d;)d.type===
0?c+=b.Iz(d.length):(d=wp(b,d.length),this.items.spliceWithArray(c,0,Array(d)),c+=d),d=b.head}for(const [e,f]of a.jk)switch(f.type){case 0:f.oldValue!=null?(a=m(this.refs.get(e)),c=wlb(this,f.oldValue),ka(a===c)):ka(!this.refs.has(e));f.newValue!=null?this.refs.set(e,wlb(this,f.newValue)):this.refs.delete(e);break;case 1:a=m(this.refs.get(e));c=wlb(this,f.oldValue);ka(a===c);this.refs.set(e,wlb(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();this.domain=(rqb.F(this),Np);this.items=
Tp.array([],{deep:!1});this.refs=Tp.map(new Map,{deep:!1});for(const [b,c]of a)this.refs.set(b,wlb(this,c))}},sqb=class extends Yp{Lz(a){return new rqb(a)}Ym(a){return a}connect(a,b){return this.Ym(a).connect(b)}cc(a){return this.Ym(a).cc()}destroy(a,b){return this.Ym(a).destroy(b)}Wi(a,b){return this.Ym(a).Wi(b)}constructor(){super(Vp,yo);this.domain=__c.Np}},Mq=new sqb;var tqb=class{create(a,b){a=Lp(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(c==null&&d==null){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.Kg();for(const [e,f]of b)Kp(a,e,c.get(e),f);c.Rq(a.build())}}get(a){var b=Lp(a);a=this.base.get(b.start);b=this.base.get(b.end);if(a!=null&&b!=null)return{start:a,end:Math.max(a,b)}}forEach(a){const b=new Set;this.base.forEach((c,d)=>{c=olb(d);b.has(c)||(b.add(c),d=m(this.get(c)),a(d,c))})}delete(a){var b=Lp(a);a=this.base;
var c=new Set([b.start,b.end]);b=a.domain.Kg();for(const d of c)c=a.get(d),c!=null&&Kp(b,d,c);a.Rq(b.build())}constructor(a){this.base=a}},uqb=Mq.map(vlb,rlb,qlb,plb,a=>new tqb(a),a=>a.base),vqb=class extends omb{Lz(a){a=Mq.Lz(plb(a));return new tqb(a)}connect(a,b){return uqb.connect(a,b)}cc(a){return uqb.cc(a)}destroy(a,b){return uqb.destroy(a,b)}Wi(a,b){return uqb.Wi(a,b)}constructor(){super();this.domain=__c.Lq}},Nq=new vqb;var Aqb,yqb,zqb,wqb,xqb;
Aqb=class extends Zp{yT(){return{rows:this.qNb.cc(this.rows),cols:this.zvb.cc(this.cols),qo:Nq.cc(this.qo.Se),po:Mq.cc(this.po.jk),Un:Nq.cc(this.Un.Se),yn:Mq.cc(this.yn.jk),cells:this.Oub.cc(this.cells.grid),attrs:this.jtb.cc(this.attrs.grid)}}destroy(a){Co(this.qNb,a.rows,this.pwd,this.rows);Co(this.zvb,a.cols,this.fwd,this.cols);Co(Nq,a.qo,this.mBc,this.qo.Se);Co(Mq,a.po,this.lBc,this.po.jk);Co(Nq,a.Un,this.iBc,this.Un.Se);Co(Mq,a.yn,this.hBc,this.yn.jk);Co(this.Oub,a.cells,this.nRb,this.cells.grid);
Co(this.jtb,a.attrs,this.mRb,this.attrs.grid)}Wi(a){return this.qNb.Wi(this.rows,a.rows)&&this.zvb.Wi(this.cols,a.cols)&&Nq.Wi(this.qo.Se,a.qo)&&Mq.Wi(this.po.jk,a.po)&&Nq.Wi(this.Un.Se,a.Un)&&Mq.Wi(this.yn.jk,a.yn)&&this.Oub.Wi(this.cells.grid,a.cells)&&this.jtb.Wi(this.attrs.grid,a.attrs)}DZ(a){const b=Pp(a.rows),c=Pp(a.cols);this.pwd.next(a.rows);this.fwd.next(a.cols);this.mBc.next(Lq.Be(b,a.qo));this.lBc.next(Np.Be(b,a.po));this.iBc.next(Lq.Be(c,a.Un));this.hBc.next(Np.Be(c,a.yn));this.nRb.next(this.domain.cells.Be({...a.cells,
y:b,x:c}));this.mRb.next(this.domain.attrs.Be({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.qNb=a;this.zvb=b;this.Oub=c;this.jtb=d;this.domain=e;this.b7=g=>this.rows.has(g)?this.rows.HM(g):void 0;this.m4=g=>this.cols.has(g)?this.cols.HM(g):void 0;this.tWa=g=>this.rows.get(g);this.sWa=g=>this.cols.get(g);this.jie=Ao(this,g=>{const h=Pp(g);Ap.isIdentity(h)||(this.nRb.next(this.domain.cells.Be({y:h})),this.mRb.next(this.domain.attrs.Be({y:h})),this.lBc.next(Np.Be(h,new Map)),this.mBc.next(Lq.Be(h,
new Map)));return this.domain.Be({rows:g})});a=Bo(this.qNb,f.rows,this.jie);this.rows=a.mutable;this.pwd=a.Zw;this.eie=Ao(this,g=>{const h=Pp(g);Ap.isIdentity(h)||(this.nRb.next(this.domain.cells.Be({x:h})),this.mRb.next(this.domain.attrs.Be({x:h})),this.hBc.next(Np.Be(h,new Map)),this.iBc.next(Lq.Be(h,new Map)));return this.domain.Be({cols:g})});a=Bo(this.zvb,f.cols,this.eie);this.cols=a.mutable;this.fwd=a.Zw;this.hie=Ao(this,g=>{ka(Ap.isIdentity(g.axis));return this.domain.Be({po:g.jk})});a=Bo(Mq,
f.po,this.hie);this.po=new wqb(a.mutable,this.b7,this.tWa);this.lBc=a.Zw;this.iie=Ao(this,g=>{ka(Ap.isIdentity(g.axis));return this.domain.Be({qo:g.Se})});a=Bo(Nq,f.qo,this.iie);this.qo=new xqb(a.mutable,this.b7,this.tWa);this.mBc=a.Zw;this.bie=Ao(this,g=>{ka(Ap.isIdentity(g.axis));return this.domain.Be({yn:g.jk})});a=Bo(Mq,f.yn,this.bie);this.yn=new wqb(a.mutable,this.m4,this.sWa);this.hBc=a.Zw;this.cie=Ao(this,g=>{ka(Ap.isIdentity(g.axis));return this.domain.Be({Un:g.Se})});a=Bo(Nq,f.Un,this.cie);
this.Un=new xqb(a.mutable,this.m4,this.sWa);this.iBc=a.Zw;this.aie=Ao(this,g=>{ka(Ap.isIdentity(g.x));ka(Ap.isIdentity(g.y));return this.domain.Be({cells:g})});a=Bo(this.Oub,f.cells,this.aie);this.cells=new yqb(a.mutable,this.b7,this.m4,this.tWa,this.sWa);this.nRb=a.Zw;this.Zhe=Ao(this,g=>{ka(Ap.isIdentity(g.x));ka(Ap.isIdentity(g.y));return this.domain.Be({attrs:g})});f=Bo(this.jtb,f.attrs,this.Zhe);this.attrs=new zqb(f.mutable,this.b7,this.m4);this.mRb=f.Zw}};
yqb=class{get(a,b){a=this.b7(a);b=this.m4(b);if(a!=null&&b!=null&&(b=this.grid.get(a,b),b!=null))return{span:{Hg:m(xlb(this,b.span)),Ag:m(ylb(this,b.span)),Tk:m(zlb(this,b.span)),fk:m(Alb(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=xlb(this,c),e=ylb(this,c);d!=null&&e!=null&&a(b,{Hg:d,Ag:e,Tk:m(zlb(this,c)),fk:m(Alb(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(Blb(this,a),b);return m(this.get(a.Hg,a.Ag))}delete(a){this.grid.delete(Blb(this,
a))}constructor(a,b,c,d,e){this.grid=a;this.b7=b;this.m4=c;this.tWa=d;this.sWa=e}};zqb=class{get(a,b,c){b=this.b7(b);c=this.m4(c);if(b!=null&&c!=null)return this.grid.get(a,b,c)}set(a,b,c){const d=this.b7(b.Hg),e=this.m4(b.Ag),f=this.b7(b.Tk||b.Hg);b=this.m4(b.fk||b.Ag);d!=null&&e!=null&&f!=null&&b!=null&&this.grid.set(a,{dXe:d,RWe:e,hzb:f,ede:b},c)}constructor(a,b,c){this.grid=a;this.b7=b;this.m4=c}};
wqb=class{get(a){a=this.jk.get(a);if(a!=null)for(;a>=0;a--){const b=this.fDb(a);if(b)return b}}forEach(a){this.jk.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){b=m(this.sFb(b));this.jk.create(a,b)}delete(a){this.jk.delete(a)}constructor(a,b,c){this.jk=a;this.sFb=b;this.fDb=c}};
xqb=class{get(a){a=this.Se.get(a);if(a!=null){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.fDb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.fDb(c);if(d){a=d;break a}}a=void 0}if(b!=null&&a!=null)return{start:b,end:a}}}forEach(a){this.Se.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){const c=m(this.sFb(b.start));b=m(this.sFb(b.end));this.Se.create(a,{start:c,end:b})}delete(a){this.Se.delete(a)}constructor(a,b,c){this.Se=a;this.sFb=b;this.fDb=c}};
__c.Eqb=class extends Yp{Lz(a){return new Aqb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}Ym(a){return a}connect(a,b){return this.Ym(a).connect(b)}cc(a){return this.Ym(a).cc()}destroy(a,b){this.Ym(a).destroy(b)}Wi(a,b){return this.Ym(a).Wi(b)}constructor(a){var b=Bqb,c=Cqb,d=__c.Dqb;super(Vp,Vp);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new qqb(b.domain,c.domain,a.domain,d.domain)}};__c.Eqb.prototype.NB=ea(105);__c.Fqb=class{static parse(a){a==="dd mmm yyyy"&&(a="dd MMM yyyy");const b=new __c.Fqb;if((a=b.gZe(a))&&a.s===""&&b.isValid())return a.value}isValid(){return this.N5b<=1&&this.klc<=1&&this.lHc<=1&&this.N5b+this.klc+this.lHc!==0}Nt(a){return b=>{var c=a.exec(b);if(c&&c.index===0)return[c]=c,{s:b.substring(c.length),value:[{type:0,value:c}]}}}compose(a,...b){return c=>{const d=[];for(const e of b){const f=e(c);if(!f)return;c=f.s;d.push(...f.value)}return{s:c,value:a(...d)}}}constructor(){this.lHc=this.klc=
this.N5b=0;this.C6d=this.compose(a=>{a=a.value;this.N5b++;ma(a==="d"||a==="dd");return[{type:1,value:a}]},this.Nt(/^d{1,2}(?!d)/));this.fAe=this.compose(a=>{a=a.value;this.klc++;switch(a){case "M":case "MM":case "MMM":case "MMMM":return[{type:1,value:a}];default:ma(!1)}},this.Nt(/^M{1,4}(?!M)/));this.n7e=this.compose(a=>{a=a.value;this.lHc++;ma(a==="yyyy"||a==="yy");return[{type:1,value:a}]},this.Nt(/^(yyyy|yy)(?!y)/));this.nWc=this.Nt(/^"/);this.CJe=this.Nt(/^[^\\"]+/);this.separator=this.Nt(/^[^a-zA-Z\\"]+/);
this.symbol=Clb(this.C6d,this.fAe,this.n7e);this.tBe=Dlb(Clb(this.symbol,this.separator));this.gZe=Dlb(Clb(this.compose((a,b)=>[b],this.nWc,this.CJe,this.nWc),this.tBe))}};var Gqb,Hqb,Iqb,Jqb,Kqb,Lqb,Mqb,Nqb,Oqb,Pqb,Qqb,Rqb,Sqb,Tqb,Uqb,Yqb,Zqb,$qb,arb,brb,drb,frb,grb,hrb,irb,jrb,krb,lrb,mrb,nrb,orb,prb,qrb,srb,trb,urb,vrb,wrb,xrb,yrb,Arb,Brb,Crb,Erb,Frb,Grb,Irb,Jrb,Bqb,Cqb,Krb,Lrb,Mrb,Nrb,Orb,Prb,Qrb,Rrb,Srb,Trb,Urb,Zrb,$rb,asb,bsb,csb,esb,gsb;Gqb=Go({mf:Fo(cq)});Hqb=Io(/^([A-Z]+|[1-9]\d*)$/);Iqb=Io(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*)$/);Jqb=Go({type:Eo("single-row"),qia:bq,Sjb:Hqb});Kqb=Go({type:Eo("single-column"),vEa:bq,Sjb:Hqb});
Lqb=Go({type:Eo("range-row"),qMa:bq,Sjb:Iqb});Mqb=Go({type:Eo("range-column"),wEa:bq,Sjb:Iqb});Nqb=Fo(__c.Ho({"single-row":Jqb,"single-column":Kqb,"range-row":Lqb,"range-column":Mqb},a=>a.type));Oqb=Go({type:Eo("canonical"),z7a:bq,Ob:Nqb});Pqb=Go({type:Eo("invalid"),gtc:bq});Qqb=Qo(Go({type:Eo("formula"),value:__c.Ho({canonical:Oqb,invalid:Pqb},a=>a.type)}));Rqb=Qo(Go({type:Eo("boolean"),value:aq}));Sqb=Do(a=>a.length<=20&&__c.Fqb.parse(a)!=null);
Tqb=Qo(Go({type:Eo("number"),value:Do(a=>Number.isFinite(a)&&(Math.abs(a)>=2.2250738585072014E-308||Object.is(a,0)))}));Uqb=Qo(Go({type:Eo("plaintext"),value:bq}));__c.Vqb=Vo({attributes:{q9:Oo(Vob)},Ob:{fill:__c.Dq}});__c.Wqb=Xo(__c.Vqb);__c.Xqb=Vo({values:{type:Eo("media")},Ob:{value:__c.Wqb}});Yqb=Xo(Qo(gpb));Zqb=Vo({values:{type:Eo("mention")},Ob:{value:Yqb}});$qb=Go({embed:hpb});arb=Xo(Qo($qb));brb=Vo({values:{type:Eo("embed")},Ob:{value:arb}});__c.crb=new __c.zq;
drb=Vo({values:{type:Eo("text2")},attributes:{Yc:Mo(Gqb)},Ob:{value:__c.crb}});__c.erb=new __c.zq;frb=Vo({values:{type:Eo("text3")},Ob:{value:__c.erb}});grb={formula:Qqb,boolean:Rqb,number:Tqb,plaintext:Uqb,media:__c.Xqb,mention:Zqb,embed:brb};hrb=lp(grb,a=>a.type,a=>a.type);irb=lp({...grb,text2:drb},a=>a.type,a=>a.type);jrb=lp({...grb,text3:frb},a=>a.type,a=>a.type);krb=lp({...grb,text2:drb},a=>a.type,a=>a.type);lrb=Go({type:Eo("plain"),format:bq});mrb=Go({type:Eo("currency"),format:bq});
nrb=Go({type:Eo("percentage"),format:bq});orb=Go({type:Eo("date"),format:Sqb});prb=__c.Ho({plain:lrb,currency:mrb,percentage:nrb,date:orb},a=>a.type);qrb=Qo(Go({type:Eo("plain_number"),Wj:lrb}));__c.rrb=Qo(Go({type:Eo("currency"),Wj:mrb}));srb=Qo(Go({type:Eo("percentage"),Wj:nrb}));trb=Qo(Go({type:Eo("date"),Wj:orb}));urb=Vo({attributes:{label:__c.iq},Ob:{fill:__c.Dq}});vrb=Xo(urb);wrb=Vo({values:{type:Eo("select")},attributes:{Wj:Oo(prb)},Ob:{options:vrb}});xrb=Qo(Go({type:Eo("mention")}));yrb=Qo(Go({type:Eo("embed")}));
__c.zrb=lp({plain_number:qrb,currency:__c.rrb,percentage:srb,date:trb,select:wrb,mention:xrb,embed:yrb},a=>a.type,a=>a.type);Arb=a=>Vo({attributes:{Tl:__c.nq},Ob:{content:No(Lo(a)),Kc:No(Lo(__c.zrb))}});Brb=Arb(hrb);
Crb={static:{fontFamily:Fq.fontFamily,fontSize:Fq.fontSize,fontWeight:Fq.fontWeight,fontStyle:Fq.fontStyle,RQ:Fq.RQ,verticalAlign:Fq.verticalAlign,color:Fq.color,Bn:Fq.Bn,qz:Fq.qz,link:Fq.link,letterSpacing:Fq.letterSpacing,lineHeight:Fq.lineHeight,direction:Fq.direction,XA:Fq.XA,yK:Fq.yK},oTa:{},vv:{}};__c.Drb=__c.Ckb(Crb);
Erb={cla:tp("block",Vlb,"inherit"),bla:tp("block",Vlb,"inherit"),ela:tp("block",Vlb,"inherit"),dla:tp("block",Vlb,"inherit"),Zka:tp("block",Tlb,"inherit"),Yka:tp("block",Tlb,"inherit"),ala:tp("block",Tlb,"inherit"),$ka:tp("block",Tlb,"inherit"),d7a:tp("block",Xlb,"inherit"),c7a:tp("block",Xlb,"inherit"),f7a:tp("block",Xlb,"inherit"),e7a:tp("block",Xlb,"inherit")};Frb=["auto",...wpb];
Grb={static:{...Crb.static,v_:tp("block",Slb,"#ffffff"),...Erb,textAlign:up("block",Frb),My:up("block",["overflow","wrap","clip"]),jl:up("block",["middle","start","end"])},oTa:{},vv:{}};__c.Hq=__c.Ckb(Grb);__c.Dqb=new Ppb;__c.Hrb=__c.Dqb.domain.pO();Irb=Vo({values:{id:bq},attributes:{height:Hmb,minHeight:__c.mq}});Jrb=Vo({values:{id:bq},attributes:{width:Hmb}});Xo(Irb);Xo(Jrb);Bqb=new __c.Ljb(Irb,Vib(Irb.tra));Cqb=new __c.Ljb(Jrb,Vib(Jrb.tra));Krb=Vo({values:{qia:bq,vEa:bq,I9d:aq}});Lrb=__c.Po(Krb);
Mrb=Vo({values:{type:Eo("replace")},attributes:{Vj:Mo(ppb),qMa:__c.iq,wEa:__c.iq}});Nrb=lp({replace:Mrb},a=>a.type,a=>a.type);Orb=Xo(Nrb);Prb=Arb(irb);Qrb=Arb(jrb);Rrb=Arb(krb);Srb=new fqb(Prb);Trb=new fqb(Qrb);Urb=new fqb(Rrb);__c.Vrb=(new fqb(Brb)).domain.pO();__c.Wrb=new __c.Eqb(Srb);__c.Xrb=new __c.Eqb(Trb);__c.Yrb=new __c.Eqb(Urb);Zrb=Vo({attributes:{Zta:__c.oq,E0a:__c.oq}});$rb=Vo({Ob:{freeze:Zrb}});
asb=a=>Vo({Ob:{WP:a,ll:Lrb,ns:__c.Eq,view:$rb,v4:Orb},attributes:{direction:Mo(Eo("ltr","rtl")),tM:jq}});bsb=a=>a.gi({computed:{attributes:{width:void 0,height:void 0},Ob:{layout:void 0,rows:void 0,cols:void 0,Ckb:void 0,W7a:void 0,C0a:void 0,NRa:void 0,l2:void 0,y_:void 0,Fc:void 0,Hc:void 0},create:b=>Flb(b)}});csb=asb(__c.Wrb);__c.dsb=bsb(csb);esb=asb(__c.Xrb);__c.fsb=bsb(esb);gsb=asb(__c.Yrb);__c.hsb=bsb(gsb);
}).call(self, self._5880d4398c473aa67256e87589eaef11);}

}])
//# sourceMappingURL=sourcemaps/4c48b8ae3c36e858.js.map